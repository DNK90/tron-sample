'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getRate = exports.getOwner = exports.getAddressFromType = exports.test = exports.setup = exports.invoke = exports.delay = exports.NEO_PRIVATE_KEY = exports.NEO_PUBLIC_KEY = exports.NEO_SCAN = exports.NEO_HOST = exports.NEO_CONTRACT_ADDRESS = exports.NEO_CONTRACT_HASH = exports.NEO = exports.TRX_RECEIVER = exports.TRX_CONTRACT_HASH = exports.TRON = exports.GET_RATE = exports.UPDATE_RATE = exports.GET_ADDRESS_FROM_TYPE = exports.UPDATE_AVAILABLE_TYPE = exports.GET_OWNER = exports.SET_OWNER = exports.PRIVATE_KEY = exports.EXCHANGE_BYTE_CODE = exports.KARDIA_CONTRACT_ADDRESS = exports.KARDIA_ENDPOINT = undefined;

var _kardiaTool = require('kardia-tool');

var _kardiaTool2 = _interopRequireDefault(_kardiaTool);

var _abi = require('../kai/abi');

var _abi2 = _interopRequireDefault(_abi);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// KARDIA
var KARDIA_ENDPOINT = exports.KARDIA_ENDPOINT = "http://127.0.0.1:8545";
var KARDIA_CONTRACT_ADDRESS = exports.KARDIA_CONTRACT_ADDRESS = "0x00000000000000000000000000000000736D6339";
var EXCHANGE_BYTE_CODE = exports.EXCHANGE_BYTE_CODE = "0x6080604052600436106100fc576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680631ccae9361461010157806340caae0614610296578063414aff2b146102ad57806342d4d52a1461037057806345ea12aa146104525780634db0315a1461049557806360c76dbc146105775780637a0cf180146106e5578063893d20e81461082a57806397175ddb14610881578063a6498032146109a9578063c109a06e146109ec578063e3f2804f14610ace578063e439799b14610b98578063f147cf5714610c19578063fd36865114610cc8578063fe40a89014610d77578063fe9fbb8014610e26575b600080fd5b34801561010d57600080fd5b50610294600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091929192908035906020019092919080359060200190929190505050610e81565b005b3480156102a257600080fd5b506102ab611842565b005b3480156102b957600080fd5b5061036e600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919291929080359060200190929190803590602001909291905050506118c5565b005b34801561037c57600080fd5b506103d7600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050611b10565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156104175780820151818401526020810190506103fc565b50505050905090810190601f1680156104445780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561045e57600080fd5b50610493600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611ecf565b005b3480156104a157600080fd5b506104fc600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050612014565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561053c578082015181840152602081019050610521565b50505050905090810190601f1680156105695780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561058357600080fd5b5061066a600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050612305565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156106aa57808201518184015260208101905061068f565b50505050905090810190601f1680156106d75780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156106f157600080fd5b50610828600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919291929080359060200190929190803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919291929050505061295e565b005b34801561083657600080fd5b5061083f612f16565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561088d57600080fd5b5061092e600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050612f3f565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561096e578082015181840152602081019050610953565b50505050905090810190601f16801561099b5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156109b557600080fd5b506109ea600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061352e565b005b3480156109f857600080fd5b50610a53600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050613672565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610a93578082015181840152602081019050610a78565b50505050905090810190601f168015610ac05780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b348015610ada57600080fd5b50610b7b600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091929192905050506136bd565b604051808381526020018281526020019250505060405180910390f35b348015610ba457600080fd5b50610bff600480360381019080803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919291929050505061396f565b604051808215151515815260200191505060405180910390f35b348015610c2557600080fd5b50610cc6600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091929192905050506139f1565b005b348015610cd457600080fd5b50610d75600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050613b75565b005b348015610d8357600080fd5b50610e24600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050613d3c565b005b348015610e3257600080fd5b50610e67600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050613f05565b604051808215151515815260200191505060405180910390f35b610e89617398565b6000610e936173fc565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615151480610f3e57506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515610fd8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001807f4f6e6c792061646d696e2063616e2063616c6c20746869732066756e6374696f81526020017f6e2e00000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b610180604051908101604052808b81526020018a81526020018981526020018881526020018781526020016020604051908101604052806000815250815260200160206040519081016040528060008152508152602001868152602001868152602001600081526020018581526020016001151581525092506006866040518082805190602001908083835b6020831015156110895780518252602082019150602081019050602083039250611064565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060009054906101000a900460ff16156110d457611836565b60038a6040518082805190602001908083835b60208310151561110c57805182526020820191506020810190506020830392506110e7565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020896040518082805190602001908083835b6020831015156111755780518252602082019150602081019050602083039250611150565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020839080600181540180825580915050906001820390600052602060002090600c02016000909192909190915060008201518160000190805190602001906111f0929190617425565b50602082015181600101908051906020019061120d929190617425565b50604082015181600201908051906020019061122a929190617425565b506060820151816003019080519060200190611247929190617425565b506080820151816004019080519060200190611264929190617425565b5060a0820151816005019080519060200190611281929190617425565b5060c082015181600601908051906020019061129e929190617425565b5060e082015181600701556101008201518160080155610120820151816009015561014082015181600a015561016082015181600b0160006101000a81548160ff0219169083151502179055505050506004886040518082805190602001908083835b6020831015156113265780518252602082019150602081019050602083039250611301565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208a6040518082805190602001908083835b60208310151561138f578051825260208201915060208101905060208303925061136a565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020896040518082805190602001908083835b6020831015156113f857805182526020820191506020810190506020830392506113d3565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208054905091506004886040518082805190602001908083835b6020831015156114695780518252602082019150602081019050602083039250611444565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208a6040518082805190602001908083835b6020831015156114d257805182526020820191506020810190506020830392506114ad565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020896040518082805190602001908083835b60208310151561153b5780518252602082019150602081019050602083039250611516565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020839080600181540180825580915050906001820390600052602060002090600c02016000909192909190915060008201518160000190805190602001906115b6929190617425565b5060208201518160010190805190602001906115d3929190617425565b5060408201518160020190805190602001906115f0929190617425565b50606082015181600301908051906020019061160d929190617425565b50608082015181600401908051906020019061162a929190617425565b5060a0820151816005019080519060200190611647929190617425565b5060c0820151816006019080519060200190611664929190617425565b5060e082015181600701556101008201518160080155610120820151816009015561014082015181600a015561016082015181600b0160006101000a81548160ff0219169083151502179055505050506080604051908101604052808981526020018b81526020018a8152602001838152509050806007876040518082805190602001908083835b60208310151561171157805182526020820191506020810190506020830392506116ec565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206000820151816000019080519060200190611760929190617425565b50602082015181600101908051906020019061177d929190617425565b50604082015181600201908051906020019061179a929190617425565b506060820151816003015590505060016006876040518082805190602001908083835b6020831015156117e257805182526020820191506020810190506020830392506117bd565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060006101000a81548160ff02191690831515021790555061183583613f5b565b5b50505050505050505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614156118c357336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515148061197057506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515611a0a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001807f4f6e6c792061646d696e2063616e2063616c6c20746869732066756e6374696f81526020017f6e2e00000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6040805190810160405280838152602001828152506005856040518082805190602001908083835b602083101515611a575780518252602082019150602081019050602083039250611a32565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020846040518082805190602001908083835b602083101515611ac05780518252602082019150602081019050602083039250611a9b565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600082015181600001556020820151816001015590505050505050565b6060806008836040518082805190602001908083835b602083101515611b4b5780518252602082019150602081019050602083039250611b26565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020805480602002602001604051908101604052809291908181526020016000905b82821015611c5a578382906000526020600020018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611c465780601f10611c1b57610100808354040283529160200191611c46565b820191906000526020600020905b815481529060010190602001808311611c2957829003601f168201915b505050505081526020019060010190611b9e565b505050509050600081511415611c825760206040519081016040528060008152509150611ec9565b806000815181101515611c9157fe5b90602001906020020151816001815181101515611caa57fe5b90602001906020020151826002815181101515611cc357fe5b90602001906020020151836003815181101515611cdc57fe5b906020019060200201516040516020018085805190602001908083835b602083101515611d1e5780518252602082019150602081019050602083039250611cf9565b6001836020036101000a038019825116818451168082178552505050505050905001807f7c0000000000000000000000000000000000000000000000000000000000000081525060010184805190602001908083835b602083101515611d995780518252602082019150602081019050602083039250611d74565b6001836020036101000a038019825116818451168082178552505050505050905001807f7c0000000000000000000000000000000000000000000000000000000000000081525060010183805190602001908083835b602083101515611e145780518252602082019150602081019050602083039250611def565b6001836020036101000a038019825116818451168082178552505050505050905001807f7c0000000000000000000000000000000000000000000000000000000000000081525060010182805190602001908083835b602083101515611e8f5780518252602082019150602081019050602083039250611e6a565b6001836020036101000a03801982511681845116808217855250505050505090500194505050505060405160208183030381529060405291505b50919050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611fb9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260218152602001807f4f6e6c7920726f6f742063616e2063616c6c20746869732066756e6374696f6e81526020017f2e0000000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b60606040516020018060000190506040516020818303038152906040526040518082805190602001908083835b6020831015156120665780518252602082019150602081019050602083039250612041565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600019166002836040518082805190602001908083835b6020831015156120cf57805182526020820191506020810190506020830392506120aa565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060405160200180828054600181600116156101000203166002900480156121605780601f1061213e576101008083540402835291820191612160565b820191906000526020600020905b81548152906001019060200180831161214c575b50509150506040516020818303038152906040526040518082805190602001908083835b6020831015156121a95780518252602082019150602081019050602083039250612184565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600019161415156122ec576002826040518082805190602001908083835b60208310151561221957805182526020820191506020810190506020830392506121f4565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156122e05780601f106122b5576101008083540402835291602001916122e0565b820191906000526020600020905b8154815290600101906020018083116122c357829003601f168201915b50505050509050612300565b602060405190810160405280600081525090505b919050565b60606129556004856040518082805190602001908083835b602083101515612342578051825260208201915060208101905060208303925061231d565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020846040518082805190602001908083835b6020831015156123ab5780518252602082019150602081019050602083039250612386565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020836040518082805190602001908083835b60208310151561241457805182526020820191506020810190506020830392506123ef565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020805480602002602001604051908101604052809291908181526020016000905b8282101561294c57838290600052602060002090600c02016101806040519081016040529081600082018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156125255780601f106124fa57610100808354040283529160200191612525565b820191906000526020600020905b81548152906001019060200180831161250857829003601f168201915b50505050508152602001600182018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156125c75780601f1061259c576101008083540402835291602001916125c7565b820191906000526020600020905b8154815290600101906020018083116125aa57829003601f168201915b50505050508152602001600282018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156126695780601f1061263e57610100808354040283529160200191612669565b820191906000526020600020905b81548152906001019060200180831161264c57829003601f168201915b50505050508152602001600382018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561270b5780601f106126e05761010080835404028352916020019161270b565b820191906000526020600020905b8154815290600101906020018083116126ee57829003601f168201915b50505050508152602001600482018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156127ad5780601f10612782576101008083540402835291602001916127ad565b820191906000526020600020905b81548152906001019060200180831161279057829003601f168201915b50505050508152602001600582018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561284f5780601f106128245761010080835404028352916020019161284f565b820191906000526020600020905b81548152906001019060200180831161283257829003601f168201915b50505050508152602001600682018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156128f15780601f106128c6576101008083540402835291602001916128f1565b820191906000526020600020905b8154815290600101906020018083116128d457829003601f168201915b50505050508152602001600782015481526020016008820154815260200160098201548152602001600a8201548152602001600b820160009054906101000a900460ff16151515158152505081526020019060010190612467565b505050506155fa565b90509392505050565b606060011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615151480612a0b57506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515612aa5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001807f4f6e6c792061646d696e2063616e2063616c6c20746869732066756e6374696f81526020017f6e2e00000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6008866040518082805190602001908083835b602083101515612add5780518252602082019150602081019050602083039250612ab8565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020805480602002602001604051908101604052809291908181526020016000905b82821015612bec578382906000526020600020018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015612bd85780601f10612bad57610100808354040283529160200191612bd8565b820191906000526020600020905b815481529060010190602001808311612bbb57829003601f168201915b505050505081526020019060010190612b30565b505050509050600081511415612cb5576004604051908082528060200260200182016040528015612c3157816020015b6060815260200190600190039081612c1c5790505b50905084816000815181101515612c4457fe5b9060200190602002018190525083816001815181101515612c6157fe5b90602001906020020181905250612c778361583c565b816002815181101515612c8657fe5b9060200190602002018190525081816003815181101515612ca357fe5b90602001906020020181905250612e8e565b612d0d816000815181101515612cc757fe5b90602001906020020151866040805190810160405280600181526020017f3b00000000000000000000000000000000000000000000000000000000000000815250615993565b816000815181101515612d1c57fe5b90602001906020020181905250612d81816001815181101515612d3b57fe5b90602001906020020151856040805190810160405280600181526020017f3b00000000000000000000000000000000000000000000000000000000000000815250615993565b816001815181101515612d9057fe5b90602001906020020181905250612dfd816002815181101515612daf57fe5b90602001906020020151612dc28561583c565b6040805190810160405280600181526020017f3b00000000000000000000000000000000000000000000000000000000000000815250615993565b816002815181101515612e0c57fe5b90602001906020020181905250612e71816003815181101515612e2b57fe5b90602001906020020151836040805190810160405280600181526020017f3b00000000000000000000000000000000000000000000000000000000000000815250615993565b816003815181101515612e8057fe5b906020019060200201819052505b806008876040518082805190602001908083835b602083101515612ec75780518252602082019150602081019050602083039250612ea2565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390209080519060200190612f0d9291906174a5565b50505050505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60606135266003846040518082805190602001908083835b602083101515612f7c5780518252602082019150602081019050602083039250612f57565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020836040518082805190602001908083835b602083101515612fe55780518252602082019150602081019050602083039250612fc0565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020805480602002602001604051908101604052809291908181526020016000905b8282101561351d57838290600052602060002090600c02016101806040519081016040529081600082018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156130f65780601f106130cb576101008083540402835291602001916130f6565b820191906000526020600020905b8154815290600101906020018083116130d957829003601f168201915b50505050508152602001600182018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156131985780601f1061316d57610100808354040283529160200191613198565b820191906000526020600020905b81548152906001019060200180831161317b57829003601f168201915b50505050508152602001600282018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561323a5780601f1061320f5761010080835404028352916020019161323a565b820191906000526020600020905b81548152906001019060200180831161321d57829003601f168201915b50505050508152602001600382018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156132dc5780601f106132b1576101008083540402835291602001916132dc565b820191906000526020600020905b8154815290600101906020018083116132bf57829003601f168201915b50505050508152602001600482018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561337e5780601f106133535761010080835404028352916020019161337e565b820191906000526020600020905b81548152906001019060200180831161336157829003601f168201915b50505050508152602001600582018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156134205780601f106133f557610100808354040283529160200191613420565b820191906000526020600020905b81548152906001019060200180831161340357829003601f168201915b50505050508152602001600682018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156134c25780601f10613497576101008083540402835291602001916134c2565b820191906000526020600020905b8154815290600101906020018083116134a557829003601f168201915b50505050508152602001600782015481526020016008820154815260200160098201548152602001600a8201548152602001600b820160009054906101000a900460ff16151515158152505081526020019060010190613038565b50505050615c18565b905092915050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515613618576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260218152602001807f4f6e6c7920726f6f742063616e2063616c6c20746869732066756e6374696f6e81526020017f2e0000000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b60018060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b606061367c617398565b61368583615e85565b905080610160015115156136ab57602060405190810160405280600081525091506136b7565b6136b4816165c3565b91505b50919050565b60008060006005856040518082805190602001908083835b6020831015156136fa57805182526020820191506020810190506020830392506136d5565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020846040518082805190602001908083835b602083101515613763578051825260208201915060208101905060208303925061373e565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206000015414151561395a576005846040518082805190602001908083835b6020831015156137d957805182526020820191506020810190506020830392506137b4565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020836040518082805190602001908083835b602083101515613842578051825260208201915060208101905060208303925061381d565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600001546005856040518082805190602001908083835b6020831015156138b1578051825260208201915060208101905060208303925061388c565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020846040518082805190602001908083835b60208310151561391a57805182526020820191506020810190506020830392506138f5565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206001015491509150613968565b600080819150809050915091505b9250929050565b60006006826040518082805190602001908083835b6020831015156139a95780518252602082019150602081019050602083039250613984565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060009054906101000a900460ff169050919050565b6139f9617398565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615151480613aa457506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515613b3e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001807f4f6e6c792061646d696e2063616e2063616c6c20746869732066756e6374696f81526020017f6e2e00000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b613b478361396f565b1515613b5257613b70565b613b5b83615e85565b9050818160a00181905250613b6f81616b8f565b5b505050565b613b7d617398565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615151480613c2857506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515613cc2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001807f4f6e6c792061646d696e2063616e2063616c6c20746869732066756e6374696f81526020017f6e2e00000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b613ccb8361396f565b1515613cd657613d37565b613cdf83615e85565b9050613d258160c00151836040805190810160405280600181526020017f2c00000000000000000000000000000000000000000000000000000000000000815250615993565b8160c00181905250613d3681616b8f565b5b505050565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615151480613de757506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515613e81576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001807f4f6e6c792061646d696e2063616e2063616c6c20746869732066756e6374696f81526020017f6e2e00000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b806002836040518082805190602001908083835b602083101515613eba5780518252602082019150602081019050602083039250613e95565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390209080519060200190613f00929190617505565b505050565b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff169050919050565b6000806000808461010001519350600385602001516040518082805190602001908083835b602083101515613fa55780518252602082019150602081019050602083039250613f80565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902085600001516040518082805190602001908083835b6020831015156140125780518252602082019150602081019050602083039250613fed565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390209250600083805490501015156155f357600091505b828054905082101561553657600084141561407457615536565b6000838381548110151561408457fe5b90600052602060002090600c02016008015414156140a157615529565b8383838154811015156140b057fe5b90600052602060002090600c020160080154101515614b00576142ff856080015184848154811015156140df57fe5b90600052602060002090600c02016001018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156141845780601f1061415957610100808354040283529160200191614184565b820191906000526020600020905b81548152906001019060200180831161416757829003601f168201915b5050505050858581548110151561419757fe5b90600052602060002090600c02016003018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561423c5780601f106142115761010080835404028352916020019161423c565b820191906000526020600020905b81548152906001019060200180831161421f57829003601f168201915b505050505087878781548110151561425057fe5b90600052602060002090600c02016004018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156142f55780601f106142ca576101008083540402835291602001916142f5565b820191906000526020600020905b8154815290600101906020018083116142d857829003601f168201915b505050505061295e565b83838381548110151561430e57fe5b90600052602060002090600c02016008015403838381548110151561432f57fe5b90600052602060002090600c0201600801819055506000838381548110151561435457fe5b90600052602060002090600c0201600801541415614392576001838381548110151561437c57fe5b90600052602060002090600c0201600901819055505b82828154811015156143a057fe5b90600052602060002090600c0201600386602001516040518082805190602001908083835b6020831015156143ea57805182526020820191506020810190506020830392506143c5565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902086600001516040518082805190602001908083835b6020831015156144575780518252602082019150602081019050602083039250614432565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208381548110151561449757fe5b90600052602060002090600c0201600082018160000190805460018160011615610100020316600290046144cc929190617585565b50600182018160010190805460018160011615610100020316600290046144f4929190617585565b506002820181600201908054600181600116156101000203166002900461451c929190617585565b5060038201816003019080546001816001161561010002031660029004614544929190617585565b506004820181600401908054600181600116156101000203166002900461456c929190617585565b5060058201816005019080546001816001161561010002031660029004614594929190617585565b50600682018160060190805460018160011615610100020316600290046145bc929190617585565b50600782015481600701556008820154816008015560098201548160090155600a82015481600a0155600b820160009054906101000a900460ff1681600b0160006101000a81548160ff021916908315150217905550905050614af7838381548110151561462657fe5b90600052602060002090600c02016101806040519081016040529081600082018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156146da5780601f106146af576101008083540402835291602001916146da565b820191906000526020600020905b8154815290600101906020018083116146bd57829003601f168201915b50505050508152602001600182018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561477c5780601f106147515761010080835404028352916020019161477c565b820191906000526020600020905b81548152906001019060200180831161475f57829003601f168201915b50505050508152602001600282018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561481e5780601f106147f35761010080835404028352916020019161481e565b820191906000526020600020905b81548152906001019060200180831161480157829003601f168201915b50505050508152602001600382018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156148c05780601f10614895576101008083540402835291602001916148c0565b820191906000526020600020905b8154815290600101906020018083116148a357829003601f168201915b50505050508152602001600482018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156149625780601f1061493757610100808354040283529160200191614962565b820191906000526020600020905b81548152906001019060200180831161494557829003601f168201915b50505050508152602001600582018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015614a045780601f106149d957610100808354040283529160200191614a04565b820191906000526020600020905b8154815290600101906020018083116149e757829003601f168201915b50505050508152602001600682018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015614aa65780601f10614a7b57610100808354040283529160200191614aa6565b820191906000526020600020905b815481529060010190602001808311614a8957829003601f168201915b50505050508152602001600782015481526020016008820154815260200160098201548152602001600a8201548152602001600b820160009054906101000a900460ff161515151581525050616b8f565b60009350615536565b8282815481101515614b0e57fe5b90600052602060002090600c0201600801548403935060008383815481101515614b3457fe5b90600052602060002090600c02016008018190555060018383815481101515614b5957fe5b90600052602060002090600c0201600901819055508282815481101515614b7c57fe5b90600052602060002090600c0201600386602001516040518082805190602001908083835b602083101515614bc65780518252602082019150602081019050602083039250614ba1565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902086600001516040518082805190602001908083835b602083101515614c335780518252602082019150602081019050602083039250614c0e565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902083815481101515614c7357fe5b90600052602060002090600c020160008201816000019080546001816001161561010002031660029004614ca8929190617585565b5060018201816001019080546001816001161561010002031660029004614cd0929190617585565b5060028201816002019080546001816001161561010002031660029004614cf8929190617585565b5060038201816003019080546001816001161561010002031660029004614d20929190617585565b5060048201816004019080546001816001161561010002031660029004614d48929190617585565b5060058201816005019080546001816001161561010002031660029004614d70929190617585565b5060068201816006019080546001816001161561010002031660029004614d98929190617585565b50600782015481600701556008820154816008015560098201548160090155600a82015481600a0155600b820160009054906101000a900460ff1681600b0160006101000a81548160ff02191690831515021790555090505061504685608001518484815481101515614e0757fe5b90600052602060002090600c02016001018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015614eac5780601f10614e8157610100808354040283529160200191614eac565b820191906000526020600020905b815481529060010190602001808311614e8f57829003601f168201915b50505050508585815481101515614ebf57fe5b90600052602060002090600c02016003018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015614f645780601f10614f3957610100808354040283529160200191614f64565b820191906000526020600020905b815481529060010190602001808311614f4757829003601f168201915b50505050508686815481101515614f7757fe5b90600052602060002090600c0201600701548787815481101515614f9757fe5b90600052602060002090600c02016004018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561503c5780601f106150115761010080835404028352916020019161503c565b820191906000526020600020905b81548152906001019060200180831161501f57829003601f168201915b505050505061295e565b615528838381548110151561505757fe5b90600052602060002090600c02016101806040519081016040529081600082018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561510b5780601f106150e05761010080835404028352916020019161510b565b820191906000526020600020905b8154815290600101906020018083116150ee57829003601f168201915b50505050508152602001600182018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156151ad5780601f10615182576101008083540402835291602001916151ad565b820191906000526020600020905b81548152906001019060200180831161519057829003601f168201915b50505050508152602001600282018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561524f5780601f106152245761010080835404028352916020019161524f565b820191906000526020600020905b81548152906001019060200180831161523257829003601f168201915b50505050508152602001600382018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156152f15780601f106152c6576101008083540402835291602001916152f1565b820191906000526020600020905b8154815290600101906020018083116152d457829003601f168201915b50505050508152602001600482018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156153935780601f1061536857610100808354040283529160200191615393565b820191906000526020600020905b81548152906001019060200180831161537657829003601f168201915b50505050508152602001600582018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156154355780601f1061540a57610100808354040283529160200191615435565b820191906000526020600020905b81548152906001019060200180831161541857829003601f168201915b50505050508152602001600682018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156154d75780601f106154ac576101008083540402835291602001916154d7565b820191906000526020600020905b8154815290600101906020018083116154ba57829003601f168201915b50505050508152602001600782015481526020016008820154815260200160098201548152602001600a8201548152602001600b820160009054906101000a900460ff161515151581525050616b8f565b5b818060010192505061405a565b60008486610100015103118061555757508461010001518486610100015103145b156155f2578385610100015103905060008114156155b457600185610120018181525050600085610100018181525050615592856000616e98565b6155af85608001518660200151876060015187896080015161295e565b6155e8565b83856101000181815250506155ca856000616e98565b6155e785608001518660200151876060015184896080015161295e565b5b6155f185616b8f565b5b5b5050505050565b606080600060606000855111156158205760206040519081016040528060008152509250600091505b84518210156158185761564c858381518110151561563d57fe5b906020019060200201516165c3565b90506040516020018060000190506040516020818303038152906040526040518082805190602001908083835b60208310151561569e5780518252602082019150602081019050602083039250615679565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916816040516020018082805190602001908083835b60208310151561570857805182526020820191506020810190506020830392506156e3565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b602083101515615771578051825260208201915060208101905060208303925061574c565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390206000191614151561580b57615808836157cd87858151811015156157be57fe5b906020019060200201516165c3565b6040805190810160405280600181526020017f7c00000000000000000000000000000000000000000000000000000000000000815250615993565b92505b8180600101925050615623565b829350615834565b602060405190810160405280600081525093505b505050919050565b6060600080606060008086141561588a576040805190810160405280600181526020017f3000000000000000000000000000000000000000000000000000000000000000815250945061598a565b8593505b6000841415156158b4578280600101935050600a848115156158ac57fe5b04935061588e565b826040519080825280601f01601f1916602001820160405280156158e75781602001602082028038833980820191505090505b5091506001830390505b60008614151561598657600a8681151561590757fe5b066030017f01000000000000000000000000000000000000000000000000000000000000000282828060019003935081518110151561594257fe5b9060200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600a8681151561597e57fe5b0495506158f1565b8194505b50505050919050565b60606040516020018060000190506040516020818303038152906040526040518082805190602001908083835b6020831015156159e557805182526020820191506020810190506020830392506159c0565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916846040516020018082805190602001908083835b602083101515615a4f5780518252602082019150602081019050602083039250615a2a565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b602083101515615ab85780518252602082019150602081019050602083039250615a93565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600019161415615af757829050615c11565b8382846040516020018084805190602001908083835b602083101515615b325780518252602082019150602081019050602083039250615b0d565b6001836020036101000a03801982511681845116808217855250505050505090500183805190602001908083835b602083101515615b855780518252602082019150602081019050602083039250615b60565b6001836020036101000a03801982511681845116808217855250505050505090500182805190602001908083835b602083101515615bd85780518252602082019150602081019050602083039250615bb3565b6001836020036101000a038019825116818451168082178552505050505050905001935050505060405160208183030381529060405290505b9392505050565b60608060006060600085511115615e695760206040519081016040528060008152509250600091505b8451821015615e615760008583815181101515615c5a57fe5b9060200190602002015161010001511415615c7457615e54565b615c948583815181101515615c8557fe5b906020019060200201516165c3565b90506040516020018060000190506040516020818303038152906040526040518082805190602001908083835b602083101515615ce65780518252602082019150602081019050602083039250615cc1565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916816040516020018082805190602001908083835b602083101515615d505780518252602082019150602081019050602083039250615d2b565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b602083101515615db95780518252602082019150602081019050602083039250615d94565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916141515615e5357615e5083615e158785815181101515615e0657fe5b906020019060200201516165c3565b6040805190810160405280600181526020017f7c00000000000000000000000000000000000000000000000000000000000000815250615993565b92505b5b8180600101925050615c41565b829350615e7d565b602060405190810160405280600081525093505b505050919050565b615e8d617398565b6000806006846040518082805190602001908083835b602083101515615ec85780518252602082019150602081019050602083039250615ea3565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060009054906101000a900460ff161515615f14576165bc565b6007846040518082805190602001908083835b602083101515615f4c5780518252602082019150602081019050602083039250615f27565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902091506004826000016040518082805460018160011615610100020316600290048015615fe25780601f10615fc0576101008083540402835291820191615fe2565b820191906000526020600020905b815481529060010190602001808311615fce575b505091505090815260200160405180910390208260010160405180828054600181600116156101000203166002900480156160545780601f10616032576101008083540402835291820191616054565b820191906000526020600020905b815481529060010190602001808311616040575b505091505090815260200160405180910390208260020160405180828054600181600116156101000203166002900480156160c65780601f106160a45761010080835404028352918201916160c6565b820191906000526020600020905b8154815290600101906020018083116160b2575b5050915050908152602001604051809103902082600301548154811015156160ea57fe5b90600052602060002090600c02019050806101806040519081016040529081600082018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156161a15780601f10616176576101008083540402835291602001916161a1565b820191906000526020600020905b81548152906001019060200180831161618457829003601f168201915b50505050508152602001600182018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156162435780601f1061621857610100808354040283529160200191616243565b820191906000526020600020905b81548152906001019060200180831161622657829003601f168201915b50505050508152602001600282018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156162e55780601f106162ba576101008083540402835291602001916162e5565b820191906000526020600020905b8154815290600101906020018083116162c857829003601f168201915b50505050508152602001600382018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156163875780601f1061635c57610100808354040283529160200191616387565b820191906000526020600020905b81548152906001019060200180831161636a57829003601f168201915b50505050508152602001600482018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156164295780601f106163fe57610100808354040283529160200191616429565b820191906000526020600020905b81548152906001019060200180831161640c57829003601f168201915b50505050508152602001600582018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156164cb5780601f106164a0576101008083540402835291602001916164cb565b820191906000526020600020905b8154815290600101906020018083116164ae57829003601f168201915b50505050508152602001600682018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561656d5780601f106165425761010080835404028352916020019161656d565b820191906000526020600020905b81548152906001019060200180831161655057829003601f168201915b50505050508152602001600782015481526020016008820154815260200160098201548152602001600a8201548152602001600b820160009054906101000a900460ff16151515158152505092505b5050919050565b606081610160015115156165e95760206040519081016040528060008152509050616b8a565b816000015182602001518360400151846060015161660a8660e0015161583c565b61661887610100015161583c565b87608001518860a001518960c001516166358b610140015161583c565b6166438c610120015161583c565b604051602001808c805190602001908083835b60208310151561667b5780518252602082019150602081019050602083039250616656565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b000000000000000000000000000000000000000000000000000000000000008152506001018b805190602001908083835b6020831015156166f657805182526020820191506020810190506020830392506166d1565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b000000000000000000000000000000000000000000000000000000000000008152506001018a805190602001908083835b602083101515616771578051825260208201915060208101905060208303925061674c565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010189805190602001908083835b6020831015156167ec57805182526020820191506020810190506020830392506167c7565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010188805190602001908083835b6020831015156168675780518252602082019150602081019050602083039250616842565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010187805190602001908083835b6020831015156168e257805182526020820191506020810190506020830392506168bd565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010186805190602001908083835b60208310151561695d5780518252602082019150602081019050602083039250616938565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010185805190602001908083835b6020831015156169d857805182526020820191506020810190506020830392506169b3565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010184805190602001908083835b602083101515616a535780518252602082019150602081019050602083039250616a2e565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010183805190602001908083835b602083101515616ace5780518252602082019150602081019050602083039250616aa9565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010182805190602001908083835b602083101515616b495780518252602082019150602081019050602083039250616b24565b6001836020036101000a0380198251168184511680821785525050505050509050019b50505050505050505050505060405160208183030381529060405290505b919050565b6000600782608001516040518082805190602001908083835b602083101515616bcd5780518252602082019150602081019050602083039250616ba8565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390209050816004826000016040518082805460018160011615610100020316600290048015616c645780601f10616c42576101008083540402835291820191616c64565b820191906000526020600020905b815481529060010190602001808311616c50575b50509150509081526020016040518091039020826001016040518082805460018160011615610100020316600290048015616cd65780601f10616cb4576101008083540402835291820191616cd6565b820191906000526020600020905b815481529060010190602001808311616cc2575b50509150509081526020016040518091039020826002016040518082805460018160011615610100020316600290048015616d485780601f10616d26576101008083540402835291820191616d48565b820191906000526020600020905b815481529060010190602001808311616d34575b505091505090815260200160405180910390208260030154815481101515616d6c57fe5b90600052602060002090600c02016000820151816000019080519060200190616d96929190617425565b506020820151816001019080519060200190616db3929190617425565b506040820151816002019080519060200190616dd0929190617425565b506060820151816003019080519060200190616ded929190617425565b506080820151816004019080519060200190616e0a929190617425565b5060a0820151816005019080519060200190616e27929190617425565b5060c0820151816006019080519060200190616e44929190617425565b5060e082015181600701556101008201518160080155610120820151816009015561014082015181600a015561016082015181600b0160006101000a81548160ff0219169083151502179055509050505050565b6000806000600385600001516040518082805190602001908083835b602083101515616ed95780518252602082019150602081019050602083039250616eb4565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902085602001516040518082805190602001908083835b602083101515616f465780518252602082019150602081019050602083039250616f21565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020925084608001516040516020018082805190602001908083835b602083101515616fb85780518252602082019150602081019050602083039250616f93565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b6020831015156170215780518252602082019150602081019050602083039250616ffc565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390209150600090505b828054905081101561739157828181548110151561706f57fe5b90600052602060002090600c020160040160405160200180828054600181600116156101000203166002900480156170de5780601f106170bc5761010080835404028352918201916170de565b820191906000526020600020905b8154815290600101906020018083116170ca575b50509150506040516020818303038152906040526040518082805190602001908083835b6020831015156171275780518252602082019150602081019050602083039250617102565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600019168260001916141561738457600084141561737f5784600386600001516040518082805190602001908083835b6020831015156171a95780518252602082019150602081019050602083039250617184565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902086602001516040518082805190602001908083835b60208310151561721657805182526020820191506020810190506020830392506171f1565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208281548110151561725657fe5b90600052602060002090600c02016000820151816000019080519060200190617280929190617425565b50602082015181600101908051906020019061729d929190617425565b5060408201518160020190805190602001906172ba929190617425565b5060608201518160030190805190602001906172d7929190617425565b5060808201518160040190805190602001906172f4929190617425565b5060a0820151816005019080519060200190617311929190617425565b5060c082015181600601908051906020019061732e929190617425565b5060e082015181600701556101008201518160080155610120820151816009015561014082015181600a015561016082015181600b0160006101000a81548160ff0219169083151502179055509050505b617391565b8080600101915050617055565b5050505050565b6101806040519081016040528060608152602001606081526020016060815260200160608152602001606081526020016060815260200160608152602001600081526020016000815260200160008152602001600081526020016000151581525090565b608060405190810160405280606081526020016060815260200160608152602001600081525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061746657805160ff1916838001178555617494565b82800160010185558215617494579182015b82811115617493578251825591602001919060010190617478565b5b5090506174a1919061760c565b5090565b8280548282559060005260206000209081019282156174f4579160200282015b828111156174f35782518290805190602001906174e3929190617425565b50916020019190600101906174c5565b5b5090506175019190617631565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061754657805160ff1916838001178555617574565b82800160010185558215617574579182015b82811115617573578251825591602001919060010190617558565b5b509050617581919061760c565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106175be57805485556175fb565b828001600101855582156175fb57600052602060002091601f016020900482015b828111156175fa5782548255916001019190600101906175df565b5b509050617608919061760c565b5090565b61762e91905b8082111561762a576000816000905550600101617612565b5090565b90565b61765a91905b80821115617656576000818161764d919061765d565b50600101617637565b5090565b90565b50805460018160011615610100020316600290046000825580601f1061768357506176a2565b601f0160209004906000526020600020908101906176a1919061760c565b5b505600a165627a7a72305820b2590c767a3a52a035ecb292535c7cb9205095aa12bc1b7f6b396acfb64bc5ae0029";
// private key of 0xBA30505351c17F4c818d94a990eDeD95e166474b
var PRIVATE_KEY = exports.PRIVATE_KEY = "0xae1a52546294bed6e734185775dbc84009de00bdf51b709471e2415c31ceeed7";
var SET_OWNER = exports.SET_OWNER = "setOwner";
var GET_OWNER = exports.GET_OWNER = "getOwner";
var UPDATE_AVAILABLE_TYPE = exports.UPDATE_AVAILABLE_TYPE = "updateAvailableType";
var GET_ADDRESS_FROM_TYPE = exports.GET_ADDRESS_FROM_TYPE = "getAddressFromType";
var UPDATE_RATE = exports.UPDATE_RATE = "updateRate";
var GET_RATE = exports.GET_RATE = "getRate";

var RATE = {
  "TRX": 16571,
  "NEO": 6482133
};

// TRON
var TRON = exports.TRON = "TRX";
var TRX_CONTRACT_HASH = exports.TRX_CONTRACT_HASH = "41d69c86eeaa2c1ea0e2db91a64c2ed5814ec66470";
var TRX_RECEIVER = exports.TRX_RECEIVER = "TMm48VEk8foxwo5656DsAS58WKtgV7fYtH";

// NEO
var NEO = exports.NEO = "NEO";
var NEO_CONTRACT_HASH = exports.NEO_CONTRACT_HASH = "a68d7d38d9f56bb88195dabee2160321b047d110";
var NEO_CONTRACT_ADDRESS = exports.NEO_CONTRACT_ADDRESS = "AHJoAbhenvrgSqUpfLWuwy55Lyi596MEt3";
var NEO_HOST = exports.NEO_HOST = "http://34.92.41.4:30333";
var NEO_SCAN = exports.NEO_SCAN = "http://34.92.41.4:4000/api/main_net";
var NEO_PUBLIC_KEY = exports.NEO_PUBLIC_KEY = "031a6c6fbbdf02ca351745fa86b9ba5a9452d785ac4f7fc2b7548ca2a46c4fcf4a";
var NEO_PRIVATE_KEY = exports.NEO_PRIVATE_KEY = "KxDgvEKzgSBPPfuVfw67oPQBSjidEiqTHURKSDL1R7yGaGYAeYnr";

var delay = exports.delay = function delay(ms) {
  return new Promise(function (resolve, reject) {
    setTimeout(resolve, ms);
  });
};

var invoke = exports.invoke = async function invoke(methodName, params) {
  var isSend = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;

  try {
    var tool = (0, _kardiaTool2.default)(KARDIA_ENDPOINT);
    var contract = tool.contract(tool.provider, EXCHANGE_BYTE_CODE, _abi2.default);
    var invoker = contract.invoke({
      params: params,
      name: methodName
    });
    if (isSend) {
      var txPayload = {
        amount: 0,
        gas: 2000000,
        gasPrice: 90000
      };
      return await invoker.send(PRIVATE_KEY, KARDIA_CONTRACT_ADDRESS, txPayload);
    }

    // use call
    return await invoker.call(KARDIA_CONTRACT_ADDRESS);
  } catch (e) {
    return Promise.reject({
      error: e.message
    });
  }
};

var setup = exports.setup = async function setup() {

  // set owner
  console.log("setting owner");
  var tx = await invoke(SET_OWNER, []);
  console.log(tx.transactionHash);

  // set AvailableTypes for TRX and NEO
  console.log("setting TRX contract hash");
  tx = await invoke(UPDATE_AVAILABLE_TYPE, ["TRX", TRX_CONTRACT_HASH]);
  console.log(tx.transactionHash);

  console.log("setting NEO contract hash");
  tx = await invoke(UPDATE_AVAILABLE_TYPE, [NEO, "00" + NEO_CONTRACT_HASH]);
  console.log(tx.transactionHash);

  // set rate
  console.log("Updating rate NEO-TRX");
  tx = await invoke(UPDATE_RATE, [NEO, TRON, RATE[NEO], RATE[TRON]]);
  console.log(tx.transactionHash);

  console.log("Updating rate TRX-NEO");
  tx = await invoke(UPDATE_RATE, [TRON, NEO, RATE[TRON], RATE[NEO]]);
  console.log(tx.transactionHash);

  return await test();
};

var test = exports.test = async function test() {
  // get owner
  console.log("getting owner");
  var done = await getOwner();
  if (!done) return false;

  // get address from TRX
  console.log("get address from TRX");
  done = await getAddressFromType("TRX");
  if (!done) return false;

  // get address from NEO
  console.log("get address from NEO");
  done = await getAddressFromType("NEO");
  if (!done) return false;

  // get rate from NEO to TRX
  console.log("get rate from NEO to TRX");
  done = await getRate("NEO", "TRX");
  if (!done) return false;

  // get rate from TRX to NEO
  console.log("get rate from TRX to NEO");
  done = await getRate("TRX", "NEO");
  return done;
};

var getAddressFromType = exports.getAddressFromType = async function getAddressFromType(_type) {
  var count = 0;
  while (true) {
    if (count === 5) {
      return false;
    }
    // get owner
    var result = await invoke(GET_ADDRESS_FROM_TYPE, [_type], false);
    if (!result) {
      count++;
      await delay(2000);
    } else {
      console.log(result);
      return true;
    }
  }
};

var getOwner = exports.getOwner = async function getOwner() {
  var count = 0;
  while (true) {
    if (count === 5) {
      return false;
    }
    // get owner
    var result = await invoke(GET_OWNER, [], false);
    if (!result) {
      count++;
      await delay(2000);
    } else {
      console.log(result);
      return true;
    }
  }
};

var getRate = exports.getRate = async function getRate(fromType, toType) {
  var count = 0;
  while (true) {
    if (count === 5) {
      return false;
    }
    // get owner
    var result = await invoke(GET_RATE, [fromType, toType], false);
    if (!result) {
      count++;
      await delay(2000);
    } else {
      console.log(result);
      return result.fromAmount === RATE[fromType] && result.receivedAmount === RATE[toType];
    }
  }
};