import KardiaTool from 'kardia-tool';
import kardiaAbi from '../kai/abi';
import { utf8ToHex } from 'kardia-tool/lib/common';
import Api from 'kardia-tool/lib/api'

// KARDIA
// export const KARDIA_ENDPOINT = "http://35.240.169.5:8545";
export const KARDIA_ENDPOINT = "http://localhost:8545";
export const KARDIA_CONTRACT_ADDRESS = "0x00000000000000000000000000000000736D6339";

export const INIT_VALIDATOR_DEPLOYED_BYTE_CODE = "608060405234801561001057600080fd5b50600060c0604051908101604052806040805190810160405280600581526020017f6e6f646531000000000000000000000000000000000000000000000000000000815250815260200160c06040519081016040528060888152602001610dd36088913981526020016040805190810160405280600981526020017f3132372e302e302e3100000000000000000000000000000000000000000000008152508152602001610bb867ffffffffffffffff1681526020016b033b2e3c9fd0803ce8000000815260200173c1fe56e3f58d3244f606306611a5d10c8333f1f673ffffffffffffffffffffffffffffffffffffffff1681525090806001815401808255809150509060018203906000526020600020906006020160009091929091909150600082015181600001908051906020019061014d929190610604565b50602082015181600101908051906020019061016a929190610604565b506040820151816002019080519060200190610187929190610604565b5060608201518160030160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055506080820151816004015560a08201518160050160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505050600060c0604051908101604052806040805190810160405280600581526020017f6e6f646531000000000000000000000000000000000000000000000000000000815250815260200160c06040519081016040528060888152602001610d4b6088913981526020016040805190810160405280600981526020017f3132372e302e302e3100000000000000000000000000000000000000000000008152508152602001610bb967ffffffffffffffff1681526020016b033b2e3c9fd0803ce80000008152602001737cefc13b6e2aedeedfb7cb6c32457240746baee573ffffffffffffffffffffffffffffffffffffffff16815250908060018154018082558091505090600182039060005260206000209060060201600090919290919091506000820151816000019080519060200190610347929190610604565b506020820151816001019080519060200190610364929190610604565b506040820151816002019080519060200190610381929190610604565b5060608201518160030160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055506080820151816004015560a08201518160050160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505050600060c0604051908101604052806040805190810160405280600581526020017f6e6f646531000000000000000000000000000000000000000000000000000000815250815260200160c06040519081016040528060888152602001610cc36088913981526020016040805190810160405280600981526020017f3132372e302e302e3100000000000000000000000000000000000000000000008152508152602001610bba67ffffffffffffffff1681526020016b033b2e3c9fd0803ce8000000815260200173ff3dac4f04ddbd24de5d6039f90596f0a8bb08fd73ffffffffffffffffffffffffffffffffffffffff16815250908060018154018082558091505090600182039060005260206000209060060201600090919290919091506000820151816000019080519060200190610541929190610604565b50602082015181600101908051906020019061055e929190610604565b50604082015181600201908051906020019061057b929190610604565b5060608201518160030160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055506080820151816004015560a08201518160050160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050506106a9565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061064557805160ff1916838001178555610673565b82800160010185558215610673579182015b82811115610672578251825591602001919060010190610657565b5b5090506106809190610684565b5090565b6106a691905b808211156106a257600081600090555060010161068a565b5090565b90565b61060b806106b86000396000f300608060405260043610610057576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680639031d9131461005c578063b5d8962714610087578063facd743b14610261575b600080fd5b34801561006857600080fd5b506100716102bc565b6040518082815260200191505060405180910390f35b34801561009357600080fd5b506100b2600480360381019080803590602001909291905050506102c8565b604051808060200180602001806020018867ffffffffffffffff1667ffffffffffffffff1681526020018781526020018673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200185815260200184810384528b818151815260200191508051906020019080838360005b83811015610152578082015181840152602081019050610137565b50505050905090810190601f16801561017f5780820380516001836020036101000a031916815260200191505b5084810383528a818151815260200191508051906020019080838360005b838110156101b857808201518184015260208101905061019d565b50505050905090810190601f1680156101e55780820380516001836020036101000a031916815260200191505b50848103825289818151815260200191508051906020019080838360005b8381101561021e578082015181840152602081019050610203565b50505050905090810190601f16801561024b5780820380516001836020036101000a031916815260200191505b509a505050505050505050505060405180910390f35b34801561026d57600080fd5b506102a2600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610535565b604051808215151515815260200191505060405180910390f35b60008080549050905090565b6060806060600080600080600080898154811015156102e357fe5b906000526020600020906006020190508060000181600101826002018360030160009054906101000a900467ffffffffffffffff1684600401548560050160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166000868054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156103d95780601f106103ae576101008083540402835291602001916103d9565b820191906000526020600020905b8154815290600101906020018083116103bc57829003601f168201915b50505050509650858054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156104755780601f1061044a57610100808354040283529160200191610475565b820191906000526020600020905b81548152906001019060200180831161045857829003601f168201915b50505050509550848054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156105115780601f106104e657610100808354040283529160200191610511565b820191906000526020600020905b8154815290600101906020018083116104f457829003601f168201915b50505050509450809050975097509750975097509750975050919395979092949650565b600080600090505b6000805490508110156105d4578273ffffffffffffffffffffffffffffffffffffffff1660008281548110151561057057fe5b906000526020600020906006020160050160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614156105c757600191506105d9565b808060010191505061053d565b600091505b509190505600a165627a7a72305820eb380b5d89bd9e1df2cbe84f57e9dc91ade9ad5a5c90a0248a9657988e3b273f0029656e6f64653a2f2f3265363166353732303165633830346639643532393863343636353834346664303737613235313663643333656363656134386637626466393364653531383264613466353764633762346438383730653565323931633137396330356666303431303037313862343931383466363461376330643430636336363334336461656e6f64653a2f2f3636303838396533396233376164653538663738393933333935343132336535366436343938393836613063643963613633643232336538363664353532316161656463396535323938653266343832386135633930663463353866623234653139363133613436326361303231306464393632383231373934663633306630656e6f64653a2f2f3761383665326237363238633736666361653736613862333730323563626136393861323839613434313032633563303231353934623563396663653333303732656537656639393266356530313864633434623938666131316665633533383234643739303135373437653861633437346634656531356237666265383630";
export const INIT_VALIDATOR_RUNTIME_BYTE_CODE = "608060405260043610610057576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680639031d9131461005c578063b5d8962714610087578063facd743b14610261575b600080fd5b34801561006857600080fd5b506100716102bc565b6040518082815260200191505060405180910390f35b34801561009357600080fd5b506100b2600480360381019080803590602001909291905050506102c8565b604051808060200180602001806020018867ffffffffffffffff1667ffffffffffffffff1681526020018781526020018673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200185815260200184810384528b818151815260200191508051906020019080838360005b83811015610152578082015181840152602081019050610137565b50505050905090810190601f16801561017f5780820380516001836020036101000a031916815260200191505b5084810383528a818151815260200191508051906020019080838360005b838110156101b857808201518184015260208101905061019d565b50505050905090810190601f1680156101e55780820380516001836020036101000a031916815260200191505b50848103825289818151815260200191508051906020019080838360005b8381101561021e578082015181840152602081019050610203565b50505050905090810190601f16801561024b5780820380516001836020036101000a031916815260200191505b509a505050505050505050505060405180910390f35b34801561026d57600080fd5b506102a2600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610535565b604051808215151515815260200191505060405180910390f35b60008080549050905090565b6060806060600080600080600080898154811015156102e357fe5b906000526020600020906006020190508060000181600101826002018360030160009054906101000a900467ffffffffffffffff1684600401548560050160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166000868054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156103d95780601f106103ae576101008083540402835291602001916103d9565b820191906000526020600020905b8154815290600101906020018083116103bc57829003601f168201915b50505050509650858054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156104755780601f1061044a57610100808354040283529160200191610475565b820191906000526020600020905b81548152906001019060200180831161045857829003601f168201915b50505050509550848054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156105115780601f106104e657610100808354040283529160200191610511565b820191906000526020600020905b8154815290600101906020018083116104f457829003601f168201915b50505050509450809050975097509750975097509750975050919395979092949650565b600080600090505b6000805490508110156105d4578273ffffffffffffffffffffffffffffffffffffffff1660008281548110151561057057fe5b906000526020600020906006020160050160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614156105c757600191506105d9565b808060010191505061053d565b600091505b509190505600a165627a7a72305820eb380b5d89bd9e1df2cbe84f57e9dc91ade9ad5a5c90a0248a9657988e3b273f0029";
export const initValidatorsAbi = [
	{
		"constant": true,
		"inputs": [],
		"name": "getNumberOfValidators",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "index",
				"type": "uint256"
			}
		],
		"name": "getValidator",
		"outputs": [
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "uint64"
			},
			{
				"name": "",
				"type": "uint256"
			},
			{
				"name": "",
				"type": "address"
			},
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "sender",
				"type": "address"
			}
		],
		"name": "isValidator",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	}
]

export const META_DEPLOYED_CODE = "608060405234801561001057600080fd5b5060405160c080611f248339810180604052810190808051906020019092919080519060200190929190805190602001909291908051906020019092919080519060200190929190805190602001909291905050506060604051908101604052808473ffffffffffffffffffffffffffffffffffffffff1681526020018367ffffffffffffffff1681526020018267ffffffffffffffff16815250600560008067ffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160000160146101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555060408201518160010160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550905050856000806101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555084600060186101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555083600160106101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555060008060086101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055506000600160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055506000600260006101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555060008060106101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055506000600160086101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555060018060186101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550505050505050611c2c806102f86000396000f3006080604052600436106100e6576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680631ad89424146100eb57806322cb9ebc14610156578063295912df146101e35780632b9a7161146102225780634081b83a1461028d57806358d575451461033a5780635cb01174146103795780635e3fca41146103b857806362cb3f76146103f75780637ea34fe11461043657806393a4d6f11461044d578063941e960f1461048c578063b3509b65146104f7578063c8bc720114610584578063d4f665e614610631578063f9828d78146106be575b600080fd5b3480156100f757600080fd5b50610154600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803567ffffffffffffffff169060200190929190803567ffffffffffffffff16906020019092919050505061076b565b005b34801561016257600080fd5b5061016b610aca565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018367ffffffffffffffff1667ffffffffffffffff1681526020018267ffffffffffffffff1667ffffffffffffffff168152602001935050505060405180910390f35b3480156101ef57600080fd5b506101f8610bf6565b604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390f35b34801561022e57600080fd5b5061028b600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803567ffffffffffffffff169060200190929190803567ffffffffffffffff169060200190929190505050610c14565b005b34801561029957600080fd5b506102c2600480360381019080803567ffffffffffffffff169060200190929190505050610fb5565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018367ffffffffffffffff1667ffffffffffffffff1681526020018267ffffffffffffffff1667ffffffffffffffff168152602001935050505060405180910390f35b34801561034657600080fd5b5061034f6110ce565b604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390f35b34801561038557600080fd5b5061038e6110eb565b604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390f35b3480156103c457600080fd5b506103cd611109565b604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390f35b34801561040357600080fd5b5061040c611126565b604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390f35b34801561044257600080fd5b5061044b611144565b005b34801561045957600080fd5b5061046261136a565b604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390f35b34801561049857600080fd5b506104f5600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803567ffffffffffffffff169060200190929190803567ffffffffffffffff169060200190929190505050611388565b005b34801561050357600080fd5b5061050c611728565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018367ffffffffffffffff1667ffffffffffffffff1681526020018267ffffffffffffffff1667ffffffffffffffff168152602001935050505060405180910390f35b34801561059057600080fd5b506105b9600480360381019080803567ffffffffffffffff169060200190929190505050611855565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018367ffffffffffffffff1667ffffffffffffffff1681526020018267ffffffffffffffff1667ffffffffffffffff168152602001935050505060405180910390f35b34801561063d57600080fd5b5061064661196e565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018367ffffffffffffffff1667ffffffffffffffff1681526020018267ffffffffffffffff1667ffffffffffffffff168152602001935050505060405180910390f35b3480156106ca57600080fd5b506106f3600480360381019080803567ffffffffffffffff169060200190929190505050611a9b565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018367ffffffffffffffff1667ffffffffffffffff1681526020018267ffffffffffffffff1667ffffffffffffffff168152602001935050505060405180910390f35b610773611bb4565b60008060056000600260009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169150819050600115158173ffffffffffffffffffffffffffffffffffffffff1663facd743b336040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15801561087b57600080fd5b505af115801561088f573d6000803e3d6000fd5b505050506040513d60208110156108a557600080fd5b81019080805190602001909291905050501515141515610953576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260288152602001807f4f6e6c792076616c696461746f72732063616e2061636365737320746869732081526020017f66756e6374696f6e00000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6060604051908101604052808773ffffffffffffffffffffffffffffffffffffffff1681526020018667ffffffffffffffff1681526020018567ffffffffffffffff16815250925082600360008060109054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160000160146101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555060408201518160010160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055509050506001600060109054906101000a900467ffffffffffffffff1601600060106101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550505050505050565b6000806000610ad7611bb4565b600360008060089054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff168152602001908152602001600020606060405190810160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681525050905080600001518160200151826040015193509350935050909192565b6000600160189054906101000a900467ffffffffffffffff16905090565b610c1c611bb4565b60008060056000600260009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169150819050600115158173ffffffffffffffffffffffffffffffffffffffff1663facd743b336040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b158015610d2457600080fd5b505af1158015610d38573d6000803e3d6000fd5b505050506040513d6020811015610d4e57600080fd5b81019080805190602001909291905050501515141515610dfc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260288152602001807f4f6e6c792076616c696461746f72732063616e2061636365737320746869732081526020017f66756e6374696f6e00000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6001600060089054906101000a900467ffffffffffffffff1601600060086101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055506060604051908101604052808773ffffffffffffffffffffffffffffffffffffffff1681526020018667ffffffffffffffff1681526020018567ffffffffffffffff1681525092508260046000600160089054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160000160146101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555060408201518160010160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555090505060018060089054906101000a900467ffffffffffffffff1601600160086101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550505050505050565b6000806000610fc2611bb4565b600560008667ffffffffffffffff1667ffffffffffffffff168152602001908152602001600020606060405190810160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815250509050806000015181602001518260400151935093509350509193909250565b60008060109054906101000a900467ffffffffffffffff16905090565b6000600260009054906101000a900467ffffffffffffffff16905090565b60008060089054906101000a900467ffffffffffffffff16905090565b6000600160089054906101000a900467ffffffffffffffff16905090565b60008060056000600260009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169150819050600115158173ffffffffffffffffffffffffffffffffffffffff1663facd743b336040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15801561124c57600080fd5b505af1158015611260573d6000803e3d6000fd5b505050506040513d602081101561127657600080fd5b81019080805190602001909291905050501515141515611324576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260288152602001807f4f6e6c792076616c696461746f72732063616e2061636365737320746869732081526020017f66756e6374696f6e00000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6001600260009054906101000a900467ffffffffffffffff1601600260006101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055505050565b6000600160009054906101000a900467ffffffffffffffff16905090565b611390611bb4565b60008060056000600260009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169150819050600115158173ffffffffffffffffffffffffffffffffffffffff1663facd743b336040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15801561149857600080fd5b505af11580156114ac573d6000803e3d6000fd5b505050506040513d60208110156114c257600080fd5b81019080805190602001909291905050501515141515611570576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260288152602001807f4f6e6c792076616c696461746f72732063616e2061636365737320746869732081526020017f66756e6374696f6e00000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b60018060009054906101000a900467ffffffffffffffff1601600160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055506060604051908101604052808773ffffffffffffffffffffffffffffffffffffffff1681526020018667ffffffffffffffff1681526020018567ffffffffffffffff1681525092508260056000600160189054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160000160146101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555060408201518160010160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555090505060018060189054906101000a900467ffffffffffffffff1601600160186101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550505050505050565b6000806000611735611bb4565b60056000600260009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff168152602001908152602001600020606060405190810160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681525050905080600001518160200151826040015193509350935050909192565b6000806000611862611bb4565b600360008667ffffffffffffffff1667ffffffffffffffff168152602001908152602001600020606060405190810160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815250509050806000015181602001518260400151935093509350509193909250565b600080600061197b611bb4565b60046000600160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff168152602001908152602001600020606060405190810160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681525050905080600001518160200151826040015193509350935050909192565b6000806000611aa8611bb4565b600460008667ffffffffffffffff1667ffffffffffffffff168152602001908152602001600020606060405190810160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815250509050806000015181602001518260400151935093509350509193909250565b606060405190810160405280600073ffffffffffffffffffffffffffffffffffffffff168152602001600067ffffffffffffffff168152602001600067ffffffffffffffff16815250905600a165627a7a7230582084180e15b7ed45f4b38d9a5e34cec2bcdc3e297919977c56bc594a52f0c6ed0e0029";
export const META_RUNTIME_CODE = "6080604052600436106100e6576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680631ad89424146100eb57806322cb9ebc14610156578063295912df146101e35780632b9a7161146102225780634081b83a1461028d57806358d575451461033a5780635cb01174146103795780635e3fca41146103b857806362cb3f76146103f75780637ea34fe11461043657806393a4d6f11461044d578063941e960f1461048c578063b3509b65146104f7578063c8bc720114610584578063d4f665e614610631578063f9828d78146106be575b600080fd5b3480156100f757600080fd5b50610154600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803567ffffffffffffffff169060200190929190803567ffffffffffffffff16906020019092919050505061076b565b005b34801561016257600080fd5b5061016b610aca565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018367ffffffffffffffff1667ffffffffffffffff1681526020018267ffffffffffffffff1667ffffffffffffffff168152602001935050505060405180910390f35b3480156101ef57600080fd5b506101f8610bf6565b604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390f35b34801561022e57600080fd5b5061028b600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803567ffffffffffffffff169060200190929190803567ffffffffffffffff169060200190929190505050610c14565b005b34801561029957600080fd5b506102c2600480360381019080803567ffffffffffffffff169060200190929190505050610fb5565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018367ffffffffffffffff1667ffffffffffffffff1681526020018267ffffffffffffffff1667ffffffffffffffff168152602001935050505060405180910390f35b34801561034657600080fd5b5061034f6110ce565b604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390f35b34801561038557600080fd5b5061038e6110eb565b604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390f35b3480156103c457600080fd5b506103cd611109565b604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390f35b34801561040357600080fd5b5061040c611126565b604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390f35b34801561044257600080fd5b5061044b611144565b005b34801561045957600080fd5b5061046261136a565b604051808267ffffffffffffffff1667ffffffffffffffff16815260200191505060405180910390f35b34801561049857600080fd5b506104f5600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803567ffffffffffffffff169060200190929190803567ffffffffffffffff169060200190929190505050611388565b005b34801561050357600080fd5b5061050c611728565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018367ffffffffffffffff1667ffffffffffffffff1681526020018267ffffffffffffffff1667ffffffffffffffff168152602001935050505060405180910390f35b34801561059057600080fd5b506105b9600480360381019080803567ffffffffffffffff169060200190929190505050611855565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018367ffffffffffffffff1667ffffffffffffffff1681526020018267ffffffffffffffff1667ffffffffffffffff168152602001935050505060405180910390f35b34801561063d57600080fd5b5061064661196e565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018367ffffffffffffffff1667ffffffffffffffff1681526020018267ffffffffffffffff1667ffffffffffffffff168152602001935050505060405180910390f35b3480156106ca57600080fd5b506106f3600480360381019080803567ffffffffffffffff169060200190929190505050611a9b565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018367ffffffffffffffff1667ffffffffffffffff1681526020018267ffffffffffffffff1667ffffffffffffffff168152602001935050505060405180910390f35b610773611bb4565b60008060056000600260009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169150819050600115158173ffffffffffffffffffffffffffffffffffffffff1663facd743b336040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15801561087b57600080fd5b505af115801561088f573d6000803e3d6000fd5b505050506040513d60208110156108a557600080fd5b81019080805190602001909291905050501515141515610953576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260288152602001807f4f6e6c792076616c696461746f72732063616e2061636365737320746869732081526020017f66756e6374696f6e00000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6060604051908101604052808773ffffffffffffffffffffffffffffffffffffffff1681526020018667ffffffffffffffff1681526020018567ffffffffffffffff16815250925082600360008060109054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160000160146101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555060408201518160010160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055509050506001600060109054906101000a900467ffffffffffffffff1601600060106101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550505050505050565b6000806000610ad7611bb4565b600360008060089054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff168152602001908152602001600020606060405190810160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681525050905080600001518160200151826040015193509350935050909192565b6000600160189054906101000a900467ffffffffffffffff16905090565b610c1c611bb4565b60008060056000600260009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169150819050600115158173ffffffffffffffffffffffffffffffffffffffff1663facd743b336040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b158015610d2457600080fd5b505af1158015610d38573d6000803e3d6000fd5b505050506040513d6020811015610d4e57600080fd5b81019080805190602001909291905050501515141515610dfc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260288152602001807f4f6e6c792076616c696461746f72732063616e2061636365737320746869732081526020017f66756e6374696f6e00000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6001600060089054906101000a900467ffffffffffffffff1601600060086101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055506060604051908101604052808773ffffffffffffffffffffffffffffffffffffffff1681526020018667ffffffffffffffff1681526020018567ffffffffffffffff1681525092508260046000600160089054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160000160146101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555060408201518160010160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555090505060018060089054906101000a900467ffffffffffffffff1601600160086101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550505050505050565b6000806000610fc2611bb4565b600560008667ffffffffffffffff1667ffffffffffffffff168152602001908152602001600020606060405190810160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815250509050806000015181602001518260400151935093509350509193909250565b60008060109054906101000a900467ffffffffffffffff16905090565b6000600260009054906101000a900467ffffffffffffffff16905090565b60008060089054906101000a900467ffffffffffffffff16905090565b6000600160089054906101000a900467ffffffffffffffff16905090565b60008060056000600260009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169150819050600115158173ffffffffffffffffffffffffffffffffffffffff1663facd743b336040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15801561124c57600080fd5b505af1158015611260573d6000803e3d6000fd5b505050506040513d602081101561127657600080fd5b81019080805190602001909291905050501515141515611324576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260288152602001807f4f6e6c792076616c696461746f72732063616e2061636365737320746869732081526020017f66756e6374696f6e00000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6001600260009054906101000a900467ffffffffffffffff1601600260006101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055505050565b6000600160009054906101000a900467ffffffffffffffff16905090565b611390611bb4565b60008060056000600260009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169150819050600115158173ffffffffffffffffffffffffffffffffffffffff1663facd743b336040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15801561149857600080fd5b505af11580156114ac573d6000803e3d6000fd5b505050506040513d60208110156114c257600080fd5b81019080805190602001909291905050501515141515611570576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260288152602001807f4f6e6c792076616c696461746f72732063616e2061636365737320746869732081526020017f66756e6374696f6e00000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b60018060009054906101000a900467ffffffffffffffff1601600160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055506060604051908101604052808773ffffffffffffffffffffffffffffffffffffffff1681526020018667ffffffffffffffff1681526020018567ffffffffffffffff1681525092508260056000600160189054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160000160146101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555060408201518160010160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555090505060018060189054906101000a900467ffffffffffffffff1601600160186101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550505050505050565b6000806000611735611bb4565b60056000600260009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff168152602001908152602001600020606060405190810160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681525050905080600001518160200151826040015193509350935050909192565b6000806000611862611bb4565b600360008667ffffffffffffffff1667ffffffffffffffff168152602001908152602001600020606060405190810160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815250509050806000015181602001518260400151935093509350509193909250565b600080600061197b611bb4565b60046000600160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff168152602001908152602001600020606060405190810160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681525050905080600001518160200151826040015193509350935050909192565b6000806000611aa8611bb4565b600460008667ffffffffffffffff1667ffffffffffffffff168152602001908152602001600020606060405190810160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff16815250509050806000015181602001518260400151935093509350509193909250565b606060405190810160405280600073ffffffffffffffffffffffffffffffffffffffff168152602001600067ffffffffffffffff168152602001600067ffffffffffffffff16815250905600a165627a7a7230582084180e15b7ed45f4b38d9a5e34cec2bcdc3e297919977c56bc594a52f0c6ed0e0029";
export const META_ABI = [
	{
		"constant": false,
		"inputs": [
			{
				"name": "contractAddress",
				"type": "address"
			},
			{
				"name": "fromTime",
				"type": "uint64"
			},
			{
				"name": "toTime",
				"type": "uint64"
			}
		],
		"name": "setStaking",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getCurrentStakingInfo",
		"outputs": [
			{
				"name": "",
				"type": "address"
			},
			{
				"name": "",
				"type": "uint64"
			},
			{
				"name": "",
				"type": "uint64"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getTotalValidators",
		"outputs": [
			{
				"name": "",
				"type": "uint64"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "contractAddress",
				"type": "address"
			},
			{
				"name": "fromTime",
				"type": "uint64"
			},
			{
				"name": "toTime",
				"type": "uint64"
			}
		],
		"name": "setVoting",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "index",
				"type": "uint64"
			}
		],
		"name": "getValidatorsInfo",
		"outputs": [
			{
				"name": "",
				"type": "address"
			},
			{
				"name": "",
				"type": "uint64"
			},
			{
				"name": "",
				"type": "uint64"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getTotalStaking",
		"outputs": [
			{
				"name": "",
				"type": "uint64"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getCurrentValidatorsIndex",
		"outputs": [
			{
				"name": "",
				"type": "uint64"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getCurrentStakingIndex",
		"outputs": [
			{
				"name": "",
				"type": "uint64"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getTotalVoting",
		"outputs": [
			{
				"name": "",
				"type": "uint64"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "updateValidatorsToKardia",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getCurrentVotingIndex",
		"outputs": [
			{
				"name": "",
				"type": "uint64"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "contractAddress",
				"type": "address"
			},
			{
				"name": "fromTime",
				"type": "uint64"
			},
			{
				"name": "toTime",
				"type": "uint64"
			}
		],
		"name": "setValidators",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getCurrentValidatorsInfo",
		"outputs": [
			{
				"name": "",
				"type": "address"
			},
			{
				"name": "",
				"type": "uint64"
			},
			{
				"name": "",
				"type": "uint64"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "index",
				"type": "uint64"
			}
		],
		"name": "getStakingInfo",
		"outputs": [
			{
				"name": "",
				"type": "address"
			},
			{
				"name": "",
				"type": "uint64"
			},
			{
				"name": "",
				"type": "uint64"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getCurrentVotingInfo",
		"outputs": [
			{
				"name": "",
				"type": "address"
			},
			{
				"name": "",
				"type": "uint64"
			},
			{
				"name": "",
				"type": "uint64"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "index",
				"type": "uint64"
			}
		],
		"name": "getVotingInfo",
		"outputs": [
			{
				"name": "",
				"type": "address"
			},
			{
				"name": "",
				"type": "uint64"
			},
			{
				"name": "",
				"type": "uint64"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"name": "_stakingPeriod",
				"type": "uint64"
			},
			{
				"name": "_votingPeriod",
				"type": "uint64"
			},
			{
				"name": "_validatorsPeriod",
				"type": "uint64"
			},
			{
				"name": "initValidators",
				"type": "address"
			},
			{
				"name": "fromTime",
				"type": "uint64"
			},
			{
				"name": "toTime",
				"type": "uint64"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	}
]

// private key of 0xBA30505351c17F4c818d94a990eDeD95e166474b
export const PRIVATE_KEY = "0xae1a52546294bed6e734185775dbc84009de00bdf51b709471e2415c31ceeed7";

export const delay = (ms) => {
  return new Promise(function (resolve, reject) {
    setTimeout(resolve, ms);
  });
};

export const call = async (contractAddress, byteCode, abi, methodName, params) => {
	const tool = KardiaTool(KARDIA_ENDPOINT);
	const api = Api(tool.provider);
	const contract = tool.contract(tool.provider, byteCode, abi);
	const invoker = contract.invoke({
      params: params,
      name: methodName
    });
	const callObject = {
		from: "0xBA30505351c17F4c818d94a990eDeD95e166474b",
		to: contractAddress,
		data: invoker.txData(),
		value: 0,
		gasPrice: 2000000,
		gas: 90000,
	};
	return await api.callSmartContract(callObject, 0);
}

export const invoke = async (contractAddress, byteCode, abi, methodName, params) => {
  try {
    const tool = KardiaTool(KARDIA_ENDPOINT);
    const contract = tool.contract(tool.provider, byteCode, abi);
    const invoker = contract.invoke({
      params: params,
      name: methodName
    });
    let txPayload = {
        amount: 0,
        gas: 2000000,
        gasPrice: 90000,
        from: "0xBA30505351c17F4c818d94a990eDeD95e166474b"
      };
  	return await invoker.send(PRIVATE_KEY, contractAddress, txPayload);

  } catch(e) {
    return Promise.reject({
      error: e.message
    })
  }
};

export const deploy = async (byteCode, abi, params) => {
	try {

		const tool = KardiaTool(KARDIA_ENDPOINT);
		const api = Api(tool.provider);
    	const contract = tool.contract(tool.provider, byteCode, abi);
    	const deploy = contract.deploy(params);
    	let txPayload = {
	        from: "0xBA30505351c17F4c818d94a990eDeD95e166474b",
			to: "0x",
			data: deploy.txData(),
			value: 0,
			gasPrice: 5000000,
			gas: 5000000,
	      };
    	let estimatedGas = await api.estimateGas(txPayload);
    	console.log(`estimatedGas = ${estimatedGas}`);
		txPayload.gas = estimatedGas;

    	// deploy contract
    	return await deploy.send(PRIVATE_KEY, txPayload);

	} catch(e) {
		return Promise.reject({
			error: e.message
		});
	}
};


export const deployTest = async () => {
	let txData = await deploy(INIT_VALIDATOR_DEPLOYED_BYTE_CODE, initValidatorsAbi, []);
	delay(3000);
	let rs = await call(txData.contractAddress, INIT_VALIDATOR_RUNTIME_BYTE_CODE, initValidatorsAbi, "isValidator", ["0xc1fe56E3F58D3244F606306611a5d10c8333f1f6"]);
	if (rs === "0x0000000000000000000000000000000000000000000000000000000000000001") {
		// deploy Meta contract
		let fromTime = new Date().getTime();
		let aDay = 1000*60*60*24;
		let stakingPeriod = aDay * 7;
		let votingPeriod = aDay * 7;
		let validatorsPeriod = aDay * 30;
		let initValidators = txData.contractAddress;
		let toTime = fromTime + validatorsPeriod;
		let metaRs = await deploy(META_DEPLOYED_CODE, META_ABI, [stakingPeriod, votingPeriod, validatorsPeriod, initValidators, fromTime, toTime]);
		delay(3000);
		rs = await call(metaRs.contractAddress, META_RUNTIME_CODE, META_ABI, "getValidatorsInfo", [0]);
		if (rs === "0x00000000000000000000000002538153866fbb8d0027edbf58efec0e080238410000000000000000000000000000000000000000000000000000016dfebcb8df0000000000000000000000000000000000000000000000000000016e993b80df") {
			
			// deploy staking


			return true
		}
	}
	return false;
}
