import KardiaTool from 'kardia-tool';
import kardiaAbi from '../kai/abi';
import { utf8ToHex } from 'kardia-tool/lib/common';
import Api from 'kardia-tool/lib/api'

// KARDIA
export const KARDIA_ENDPOINT = "http://35.240.169.5:8545";
// export const KARDIA_ENDPOINT = "http://localhost:8545";
export const KARDIA_CONTRACT_ADDRESS = "0x00000000000000000000000000000000736D6339";

export const EXCHANGE_BYTE_CODE = "0x6080604052600436106100f1576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680631ccae936146100f657806340caae061461028b578063414aff2b146102a257806342d4d52a1461036557806345ea12aa146104475780634db0315a1461048a57806360c76dbc1461056c578063893d20e8146106da57806397175ddb14610731578063a649803214610859578063c109a06e1461089c578063e3f2804f1461097e578063e439799b14610a48578063f147cf5714610ac9578063fd36865114610b78578063fe40a89014610c27578063fe9fbb8014610cd6575b600080fd5b34801561010257600080fd5b50610289600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091929192908035906020019092919080359060200190929190505050610d31565b005b34801561029757600080fd5b506102a06116f2565b005b3480156102ae57600080fd5b50610363600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091929192908035906020019092919080359060200190929190505050611775565b005b34801561037157600080fd5b506103cc600480360381019080803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091929192905050506119c0565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561040c5780820151818401526020810190506103f1565b50505050905090810190601f1680156104395780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561045357600080fd5b50610488600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611d7f565b005b34801561049657600080fd5b506104f1600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050611ec4565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610531578082015181840152602081019050610516565b50505050905090810190601f16801561055e5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561057857600080fd5b5061065f600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091929192905050506121b5565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561069f578082015181840152602081019050610684565b50505050905090810190601f1680156106cc5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156106e657600080fd5b506106ef61280e565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561073d57600080fd5b506107de600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050612837565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561081e578082015181840152602081019050610803565b50505050905090810190601f16801561084b5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561086557600080fd5b5061089a600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050612e26565b005b3480156108a857600080fd5b50610903600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050612f6a565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610943578082015181840152602081019050610928565b50505050905090810190601f1680156109705780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561098a57600080fd5b50610a2b600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050612fb5565b604051808381526020018281526020019250505060405180910390f35b348015610a5457600080fd5b50610aaf600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050613267565b604051808215151515815260200191505060405180910390f35b348015610ad557600080fd5b50610b76600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091929192905050506132e9565b005b348015610b8457600080fd5b50610c25600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919291929050505061346d565b005b348015610c3357600080fd5b50610cd4600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050613634565b005b348015610ce257600080fd5b50610d17600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506137fd565b604051808215151515815260200191505060405180910390f35b610d39616222565b6000610d43616286565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615151480610dee57506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515610e88576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001807f4f6e6c792061646d696e2063616e2063616c6c20746869732066756e6374696f81526020017f6e2e00000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b610180604051908101604052808b81526020018a81526020018981526020018881526020018781526020016020604051908101604052806000815250815260200160206040519081016040528060008152508152602001868152602001868152602001600081526020018581526020016001151581525092506006866040518082805190602001908083835b602083101515610f395780518252602082019150602081019050602083039250610f14565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060009054906101000a900460ff1615610f84576116e6565b60038a6040518082805190602001908083835b602083101515610fbc5780518252602082019150602081019050602083039250610f97565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020896040518082805190602001908083835b6020831015156110255780518252602082019150602081019050602083039250611000565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020839080600181540180825580915050906001820390600052602060002090600c02016000909192909190915060008201518160000190805190602001906110a09291906162af565b5060208201518160010190805190602001906110bd9291906162af565b5060408201518160020190805190602001906110da9291906162af565b5060608201518160030190805190602001906110f79291906162af565b5060808201518160040190805190602001906111149291906162af565b5060a08201518160050190805190602001906111319291906162af565b5060c082015181600601908051906020019061114e9291906162af565b5060e082015181600701556101008201518160080155610120820151816009015561014082015181600a015561016082015181600b0160006101000a81548160ff0219169083151502179055505050506004886040518082805190602001908083835b6020831015156111d657805182526020820191506020810190506020830392506111b1565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208a6040518082805190602001908083835b60208310151561123f578051825260208201915060208101905060208303925061121a565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020896040518082805190602001908083835b6020831015156112a85780518252602082019150602081019050602083039250611283565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208054905091506004886040518082805190602001908083835b60208310151561131957805182526020820191506020810190506020830392506112f4565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208a6040518082805190602001908083835b602083101515611382578051825260208201915060208101905060208303925061135d565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020896040518082805190602001908083835b6020831015156113eb57805182526020820191506020810190506020830392506113c6565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020839080600181540180825580915050906001820390600052602060002090600c02016000909192909190915060008201518160000190805190602001906114669291906162af565b5060208201518160010190805190602001906114839291906162af565b5060408201518160020190805190602001906114a09291906162af565b5060608201518160030190805190602001906114bd9291906162af565b5060808201518160040190805190602001906114da9291906162af565b5060a08201518160050190805190602001906114f79291906162af565b5060c08201518160060190805190602001906115149291906162af565b5060e082015181600701556101008201518160080155610120820151816009015561014082015181600a015561016082015181600b0160006101000a81548160ff0219169083151502179055505050506080604051908101604052808981526020018b81526020018a8152602001838152509050806007876040518082805190602001908083835b6020831015156115c1578051825260208201915060208101905060208303925061159c565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060008201518160000190805190602001906116109291906162af565b50602082015181600101908051906020019061162d9291906162af565b50604082015181600201908051906020019061164a9291906162af565b506060820151816003015590505060016006876040518082805190602001908083835b602083101515611692578051825260208201915060208101905060208303925061166d565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060006101000a81548160ff0219169083151502179055506116e583613853565b5b50505050505050505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141561177357336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515148061182057506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b15156118ba576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001807f4f6e6c792061646d696e2063616e2063616c6c20746869732066756e6374696f81526020017f6e2e00000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6040805190810160405280838152602001828152506005856040518082805190602001908083835b60208310151561190757805182526020820191506020810190506020830392506118e2565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020846040518082805190602001908083835b602083101515611970578051825260208201915060208101905060208303925061194b565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600082015181600001556020820151816001015590505050505050565b6060806008836040518082805190602001908083835b6020831015156119fb57805182526020820191506020810190506020830392506119d6565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020805480602002602001604051908101604052809291908181526020016000905b82821015611b0a578382906000526020600020018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611af65780601f10611acb57610100808354040283529160200191611af6565b820191906000526020600020905b815481529060010190602001808311611ad957829003601f168201915b505050505081526020019060010190611a4e565b505050509050600081511415611b325760206040519081016040528060008152509150611d79565b806000815181101515611b4157fe5b90602001906020020151816001815181101515611b5a57fe5b90602001906020020151826002815181101515611b7357fe5b90602001906020020151836003815181101515611b8c57fe5b906020019060200201516040516020018085805190602001908083835b602083101515611bce5780518252602082019150602081019050602083039250611ba9565b6001836020036101000a038019825116818451168082178552505050505050905001807f7c0000000000000000000000000000000000000000000000000000000000000081525060010184805190602001908083835b602083101515611c495780518252602082019150602081019050602083039250611c24565b6001836020036101000a038019825116818451168082178552505050505050905001807f7c0000000000000000000000000000000000000000000000000000000000000081525060010183805190602001908083835b602083101515611cc45780518252602082019150602081019050602083039250611c9f565b6001836020036101000a038019825116818451168082178552505050505050905001807f7c0000000000000000000000000000000000000000000000000000000000000081525060010182805190602001908083835b602083101515611d3f5780518252602082019150602081019050602083039250611d1a565b6001836020036101000a03801982511681845116808217855250505050505090500194505050505060405160208183030381529060405291505b50919050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611e69576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260218152602001807f4f6e6c7920726f6f742063616e2063616c6c20746869732066756e6374696f6e81526020017f2e0000000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b60606040516020018060000190506040516020818303038152906040526040518082805190602001908083835b602083101515611f165780518252602082019150602081019050602083039250611ef1565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600019166002836040518082805190602001908083835b602083101515611f7f5780518252602082019150602081019050602083039250611f5a565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060405160200180828054600181600116156101000203166002900480156120105780601f10611fee576101008083540402835291820191612010565b820191906000526020600020905b815481529060010190602001808311611ffc575b50509150506040516020818303038152906040526040518082805190602001908083835b6020831015156120595780518252602082019150602081019050602083039250612034565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390206000191614151561219c576002826040518082805190602001908083835b6020831015156120c957805182526020820191506020810190506020830392506120a4565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156121905780601f1061216557610100808354040283529160200191612190565b820191906000526020600020905b81548152906001019060200180831161217357829003601f168201915b505050505090506121b0565b602060405190810160405280600081525090505b919050565b60606128056004856040518082805190602001908083835b6020831015156121f257805182526020820191506020810190506020830392506121cd565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020846040518082805190602001908083835b60208310151561225b5780518252602082019150602081019050602083039250612236565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020836040518082805190602001908083835b6020831015156122c4578051825260208201915060208101905060208303925061229f565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020805480602002602001604051908101604052809291908181526020016000905b828210156127fc57838290600052602060002090600c02016101806040519081016040529081600082018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156123d55780601f106123aa576101008083540402835291602001916123d5565b820191906000526020600020905b8154815290600101906020018083116123b857829003601f168201915b50505050508152602001600182018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156124775780601f1061244c57610100808354040283529160200191612477565b820191906000526020600020905b81548152906001019060200180831161245a57829003601f168201915b50505050508152602001600282018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156125195780601f106124ee57610100808354040283529160200191612519565b820191906000526020600020905b8154815290600101906020018083116124fc57829003601f168201915b50505050508152602001600382018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156125bb5780601f10612590576101008083540402835291602001916125bb565b820191906000526020600020905b81548152906001019060200180831161259e57829003601f168201915b50505050508152602001600482018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561265d5780601f106126325761010080835404028352916020019161265d565b820191906000526020600020905b81548152906001019060200180831161264057829003601f168201915b50505050508152602001600582018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156126ff5780601f106126d4576101008083540402835291602001916126ff565b820191906000526020600020905b8154815290600101906020018083116126e257829003601f168201915b50505050508152602001600682018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156127a15780601f10612776576101008083540402835291602001916127a1565b820191906000526020600020905b81548152906001019060200180831161278457829003601f168201915b50505050508152602001600782015481526020016008820154815260200160098201548152602001600a8201548152602001600b820160009054906101000a900460ff16151515158152505081526020019060010190612317565b50505050614011565b90509392505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6060612e1e6003846040518082805190602001908083835b602083101515612874578051825260208201915060208101905060208303925061284f565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020836040518082805190602001908083835b6020831015156128dd57805182526020820191506020810190506020830392506128b8565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020805480602002602001604051908101604052809291908181526020016000905b82821015612e1557838290600052602060002090600c02016101806040519081016040529081600082018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156129ee5780601f106129c3576101008083540402835291602001916129ee565b820191906000526020600020905b8154815290600101906020018083116129d157829003601f168201915b50505050508152602001600182018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015612a905780601f10612a6557610100808354040283529160200191612a90565b820191906000526020600020905b815481529060010190602001808311612a7357829003601f168201915b50505050508152602001600282018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015612b325780601f10612b0757610100808354040283529160200191612b32565b820191906000526020600020905b815481529060010190602001808311612b1557829003601f168201915b50505050508152602001600382018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015612bd45780601f10612ba957610100808354040283529160200191612bd4565b820191906000526020600020905b815481529060010190602001808311612bb757829003601f168201915b50505050508152602001600482018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015612c765780601f10612c4b57610100808354040283529160200191612c76565b820191906000526020600020905b815481529060010190602001808311612c5957829003601f168201915b50505050508152602001600582018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015612d185780601f10612ced57610100808354040283529160200191612d18565b820191906000526020600020905b815481529060010190602001808311612cfb57829003601f168201915b50505050508152602001600682018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015612dba5780601f10612d8f57610100808354040283529160200191612dba565b820191906000526020600020905b815481529060010190602001808311612d9d57829003601f168201915b50505050508152602001600782015481526020016008820154815260200160098201548152602001600a8201548152602001600b820160009054906101000a900460ff16151515158152505081526020019060010190612930565b50505050614253565b905092915050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515612f10576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260218152602001807f4f6e6c7920726f6f742063616e2063616c6c20746869732066756e6374696f6e81526020017f2e0000000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b60018060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b6060612f74616222565b612f7d836144c0565b90508061016001511515612fa35760206040519081016040528060008152509150612faf565b612fac81614bfe565b91505b50919050565b60008060006005856040518082805190602001908083835b602083101515612ff25780518252602082019150602081019050602083039250612fcd565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020846040518082805190602001908083835b60208310151561305b5780518252602082019150602081019050602083039250613036565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060000154141515613252576005846040518082805190602001908083835b6020831015156130d157805182526020820191506020810190506020830392506130ac565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020836040518082805190602001908083835b60208310151561313a5780518252602082019150602081019050602083039250613115565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600001546005856040518082805190602001908083835b6020831015156131a95780518252602082019150602081019050602083039250613184565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020846040518082805190602001908083835b60208310151561321257805182526020820191506020810190506020830392506131ed565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206001015491509150613260565b600080819150809050915091505b9250929050565b60006006826040518082805190602001908083835b6020831015156132a1578051825260208201915060208101905060208303925061327c565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060009054906101000a900460ff169050919050565b6132f1616222565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515148061339c57506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515613436576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001807f4f6e6c792061646d696e2063616e2063616c6c20746869732066756e6374696f81526020017f6e2e00000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b61343f83613267565b151561344a57613468565b613453836144c0565b9050818160a00181905250613467816151ca565b5b505050565b613475616222565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515148061352057506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b15156135ba576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001807f4f6e6c792061646d696e2063616e2063616c6c20746869732066756e6374696f81526020017f6e2e00000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6135c383613267565b15156135ce5761362f565b6135d7836144c0565b905061361d8160c00151836040805190810160405280600181526020017f2c000000000000000000000000000000000000000000000000000000000000008152506154d3565b8160c0018190525061362e816151ca565b5b505050565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16151514806136df57506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515613779576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001807f4f6e6c792061646d696e2063616e2063616c6c20746869732066756e6374696f81526020017f6e2e00000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b806002836040518082805190602001908083835b6020831015156137b2578051825260208201915060208101905060208303925061378d565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902090805190602001906137f892919061632f565b505050565b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff169050919050565b6000806000613860616222565b60008561010001519450600386602001516040518082805190602001908083835b6020831015156138a65780518252602082019150602081019050602083039250613881565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902086600001516040518082805190602001908083835b60208310151561391357805182526020820191506020810190506020830392506138ee565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902093506000848054905010151561400957600092505b8380549050831015613f4c57600085141561397557613f4c565b6000848481548110151561398557fe5b90600052602060002090600c02016008015414156139a257613f3f565b613a6284848154811015156139b357fe5b90600052602060002090600c02016004018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015613a585780601f10613a2d57610100808354040283529160200191613a58565b820191906000526020600020905b815481529060010190602001808311613a3b57829003601f168201915b50505050506144c0565b915084826101000151101515613ce057613a8f866080015183602001518460600151888660800151615758565b84826101000151038261010001818152505060008261010001511415613abc576001826101200181815250505b81600387602001516040518082805190602001908083835b602083101515613af95780518252602082019150602081019050602083039250613ad4565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902087600001516040518082805190602001908083835b602083101515613b665780518252602082019150602081019050602083039250613b41565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902084815481101515613ba657fe5b90600052602060002090600c02016000820151816000019080519060200190613bd09291906162af565b506020820151816001019080519060200190613bed9291906162af565b506040820151816002019080519060200190613c0a9291906162af565b506060820151816003019080519060200190613c279291906162af565b506080820151816004019080519060200190613c449291906162af565b5060a0820151816005019080519060200190613c619291906162af565b5060c0820151816006019080519060200190613c7e9291906162af565b5060e082015181600701556101008201518160080155610120820151816009015561014082015181600a015561016082015181600b0160006101000a81548160ff021916908315150217905550905050613cd7826151ca565b60009450613f4c565b8161010001518503945060008261010001818152505060018261012001818152505081600387602001516040518082805190602001908083835b602083101515613d3f5780518252602082019150602081019050602083039250613d1a565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902087600001516040518082805190602001908083835b602083101515613dac5780518252602082019150602081019050602083039250613d87565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902084815481101515613dec57fe5b90600052602060002090600c02016000820151816000019080519060200190613e169291906162af565b506020820151816001019080519060200190613e339291906162af565b506040820151816002019080519060200190613e509291906162af565b506060820151816003019080519060200190613e6d9291906162af565b506080820151816004019080519060200190613e8a9291906162af565b5060a0820151816005019080519060200190613ea79291906162af565b5060c0820151816006019080519060200190613ec49291906162af565b5060e082015181600701556101008201518160080155610120820151816009015561014082015181600a015561016082015181600b0160006101000a81548160ff021916908315150217905550905050613f358660800151836020015184606001518560e001518660800151615758565b613f3e826151ca565b5b828060010193505061395b565b600085876101000151031180613f6d57508561010001518587610100015103145b1561400857848661010001510390506000811415613fca57600186610120018181525050600086610100018181525050613fa8866000615bcb565b613fc5866080015187602001518860600151888a60800151615758565b613ffe565b8486610100018181525050613fe0866000615bcb565b613ffd866080015187602001518860600151848a60800151615758565b5b614007866151ca565b5b5b505050505050565b606080600060606000855111156142375760206040519081016040528060008152509250600091505b845182101561422f57614063858381518110151561405457fe5b90602001906020020151614bfe565b90506040516020018060000190506040516020818303038152906040526040518082805190602001908083835b6020831015156140b55780518252602082019150602081019050602083039250614090565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916816040516020018082805190602001908083835b60208310151561411f57805182526020820191506020810190506020830392506140fa565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b6020831015156141885780518252602082019150602081019050602083039250614163565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600019161415156142225761421f836141e487858151811015156141d557fe5b90602001906020020151614bfe565b6040805190810160405280600181526020017f7c000000000000000000000000000000000000000000000000000000000000008152506154d3565b92505b818060010192505061403a565b82935061424b565b602060405190810160405280600081525093505b505050919050565b606080600060606000855111156144a45760206040519081016040528060008152509250600091505b845182101561449c576000858381518110151561429557fe5b90602001906020020151610100015114156142af5761448f565b6142cf85838151811015156142c057fe5b90602001906020020151614bfe565b90506040516020018060000190506040516020818303038152906040526040518082805190602001908083835b60208310151561432157805182526020820191506020810190506020830392506142fc565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916816040516020018082805190602001908083835b60208310151561438b5780518252602082019150602081019050602083039250614366565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b6020831015156143f457805182526020820191506020810190506020830392506143cf565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390206000191614151561448e5761448b83614450878581518110151561444157fe5b90602001906020020151614bfe565b6040805190810160405280600181526020017f7c000000000000000000000000000000000000000000000000000000000000008152506154d3565b92505b5b818060010192505061427c565b8293506144b8565b602060405190810160405280600081525093505b505050919050565b6144c8616222565b6000806006846040518082805190602001908083835b60208310151561450357805182526020820191506020810190506020830392506144de565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060009054906101000a900460ff16151561454f57614bf7565b6007846040518082805190602001908083835b6020831015156145875780518252602082019150602081019050602083039250614562565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390209150600482600001604051808280546001816001161561010002031660029004801561461d5780601f106145fb57610100808354040283529182019161461d565b820191906000526020600020905b815481529060010190602001808311614609575b5050915050908152602001604051809103902082600101604051808280546001816001161561010002031660029004801561468f5780601f1061466d57610100808354040283529182019161468f565b820191906000526020600020905b81548152906001019060200180831161467b575b505091505090815260200160405180910390208260020160405180828054600181600116156101000203166002900480156147015780601f106146df576101008083540402835291820191614701565b820191906000526020600020905b8154815290600101906020018083116146ed575b50509150509081526020016040518091039020826003015481548110151561472557fe5b90600052602060002090600c02019050806101806040519081016040529081600082018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156147dc5780601f106147b1576101008083540402835291602001916147dc565b820191906000526020600020905b8154815290600101906020018083116147bf57829003601f168201915b50505050508152602001600182018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561487e5780601f106148535761010080835404028352916020019161487e565b820191906000526020600020905b81548152906001019060200180831161486157829003601f168201915b50505050508152602001600282018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156149205780601f106148f557610100808354040283529160200191614920565b820191906000526020600020905b81548152906001019060200180831161490357829003601f168201915b50505050508152602001600382018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156149c25780601f10614997576101008083540402835291602001916149c2565b820191906000526020600020905b8154815290600101906020018083116149a557829003601f168201915b50505050508152602001600482018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015614a645780601f10614a3957610100808354040283529160200191614a64565b820191906000526020600020905b815481529060010190602001808311614a4757829003601f168201915b50505050508152602001600582018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015614b065780601f10614adb57610100808354040283529160200191614b06565b820191906000526020600020905b815481529060010190602001808311614ae957829003601f168201915b50505050508152602001600682018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015614ba85780601f10614b7d57610100808354040283529160200191614ba8565b820191906000526020600020905b815481529060010190602001808311614b8b57829003601f168201915b50505050508152602001600782015481526020016008820154815260200160098201548152602001600a8201548152602001600b820160009054906101000a900460ff16151515158152505092505b5050919050565b60608161016001511515614c2457602060405190810160405280600081525090506151c5565b8160000151826020015183604001518460600151614c458660e001516160cb565b614c538761010001516160cb565b87608001518860a001518960c00151614c708b61014001516160cb565b614c7e8c61012001516160cb565b604051602001808c805190602001908083835b602083101515614cb65780518252602082019150602081019050602083039250614c91565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b000000000000000000000000000000000000000000000000000000000000008152506001018b805190602001908083835b602083101515614d315780518252602082019150602081019050602083039250614d0c565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b000000000000000000000000000000000000000000000000000000000000008152506001018a805190602001908083835b602083101515614dac5780518252602082019150602081019050602083039250614d87565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010189805190602001908083835b602083101515614e275780518252602082019150602081019050602083039250614e02565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010188805190602001908083835b602083101515614ea25780518252602082019150602081019050602083039250614e7d565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010187805190602001908083835b602083101515614f1d5780518252602082019150602081019050602083039250614ef8565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010186805190602001908083835b602083101515614f985780518252602082019150602081019050602083039250614f73565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010185805190602001908083835b6020831015156150135780518252602082019150602081019050602083039250614fee565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010184805190602001908083835b60208310151561508e5780518252602082019150602081019050602083039250615069565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010183805190602001908083835b60208310151561510957805182526020820191506020810190506020830392506150e4565b6001836020036101000a038019825116818451168082178552505050505050905001807f3b0000000000000000000000000000000000000000000000000000000000000081525060010182805190602001908083835b602083101515615184578051825260208201915060208101905060208303925061515f565b6001836020036101000a0380198251168184511680821785525050505050509050019b50505050505050505050505060405160208183030381529060405290505b919050565b6000600782608001516040518082805190602001908083835b60208310151561520857805182526020820191506020810190506020830392506151e3565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020905081600482600001604051808280546001816001161561010002031660029004801561529f5780601f1061527d57610100808354040283529182019161529f565b820191906000526020600020905b81548152906001019060200180831161528b575b505091505090815260200160405180910390208260010160405180828054600181600116156101000203166002900480156153115780601f106152ef576101008083540402835291820191615311565b820191906000526020600020905b8154815290600101906020018083116152fd575b505091505090815260200160405180910390208260020160405180828054600181600116156101000203166002900480156153835780601f10615361576101008083540402835291820191615383565b820191906000526020600020905b81548152906001019060200180831161536f575b5050915050908152602001604051809103902082600301548154811015156153a757fe5b90600052602060002090600c020160008201518160000190805190602001906153d19291906162af565b5060208201518160010190805190602001906153ee9291906162af565b50604082015181600201908051906020019061540b9291906162af565b5060608201518160030190805190602001906154289291906162af565b5060808201518160040190805190602001906154459291906162af565b5060a08201518160050190805190602001906154629291906162af565b5060c082015181600601908051906020019061547f9291906162af565b5060e082015181600701556101008201518160080155610120820151816009015561014082015181600a015561016082015181600b0160006101000a81548160ff0219169083151502179055509050505050565b60606040516020018060000190506040516020818303038152906040526040518082805190602001908083835b6020831015156155255780518252602082019150602081019050602083039250615500565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916846040516020018082805190602001908083835b60208310151561558f578051825260208201915060208101905060208303925061556a565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b6020831015156155f857805182526020820191506020810190506020830392506155d3565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916141561563757829050615751565b8382846040516020018084805190602001908083835b602083101515615672578051825260208201915060208101905060208303925061564d565b6001836020036101000a03801982511681845116808217855250505050505090500183805190602001908083835b6020831015156156c557805182526020820191506020810190506020830392506156a0565b6001836020036101000a03801982511681845116808217855250505050505090500182805190602001908083835b60208310151561571857805182526020820191506020810190506020830392506156f3565b6001836020036101000a038019825116818451168082178552505050505050905001935050505060405160208183030381529060405290505b9392505050565b60606008866040518082805190602001908083835b602083101515615792578051825260208201915060208101905060208303925061576d565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020805480602002602001604051908101604052809291908181526020016000905b828210156158a1578382906000526020600020018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561588d5780601f106158625761010080835404028352916020019161588d565b820191906000526020600020905b81548152906001019060200180831161587057829003601f168201915b5050505050815260200190600101906157e5565b50505050905060008151141561596a5760046040519080825280602002602001820160405280156158e657816020015b60608152602001906001900390816158d15790505b509050848160008151811015156158f957fe5b906020019060200201819052508381600181518110151561591657fe5b9060200190602002018190525061592c836160cb565b81600281518110151561593b57fe5b906020019060200201819052508181600381518110151561595857fe5b90602001906020020181905250615b43565b6159c281600081518110151561597c57fe5b90602001906020020151866040805190810160405280600181526020017f3b000000000000000000000000000000000000000000000000000000000000008152506154d3565b8160008151811015156159d157fe5b90602001906020020181905250615a368160018151811015156159f057fe5b90602001906020020151856040805190810160405280600181526020017f3b000000000000000000000000000000000000000000000000000000000000008152506154d3565b816001815181101515615a4557fe5b90602001906020020181905250615ab2816002815181101515615a6457fe5b90602001906020020151615a77856160cb565b6040805190810160405280600181526020017f3b000000000000000000000000000000000000000000000000000000000000008152506154d3565b816002815181101515615ac157fe5b90602001906020020181905250615b26816003815181101515615ae057fe5b90602001906020020151836040805190810160405280600181526020017f3b000000000000000000000000000000000000000000000000000000000000008152506154d3565b816003815181101515615b3557fe5b906020019060200201819052505b806008876040518082805190602001908083835b602083101515615b7c5780518252602082019150602081019050602083039250615b57565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390209080519060200190615bc29291906163af565b50505050505050565b6000806000600385600001516040518082805190602001908083835b602083101515615c0c5780518252602082019150602081019050602083039250615be7565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902085602001516040518082805190602001908083835b602083101515615c795780518252602082019150602081019050602083039250615c54565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020925084608001516040516020018082805190602001908083835b602083101515615ceb5780518252602082019150602081019050602083039250615cc6565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b602083101515615d545780518252602082019150602081019050602083039250615d2f565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390209150600090505b82805490508110156160c4578281815481101515615da257fe5b90600052602060002090600c02016004016040516020018082805460018160011615610100020316600290048015615e115780601f10615def576101008083540402835291820191615e11565b820191906000526020600020905b815481529060010190602001808311615dfd575b50509150506040516020818303038152906040526040518082805190602001908083835b602083101515615e5a5780518252602082019150602081019050602083039250615e35565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916826000191614156160b75760008414156160b25784600386600001516040518082805190602001908083835b602083101515615edc5780518252602082019150602081019050602083039250615eb7565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902086602001516040518082805190602001908083835b602083101515615f495780518252602082019150602081019050602083039250615f24565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902082815481101515615f8957fe5b90600052602060002090600c02016000820151816000019080519060200190615fb39291906162af565b506020820151816001019080519060200190615fd09291906162af565b506040820151816002019080519060200190615fed9291906162af565b50606082015181600301908051906020019061600a9291906162af565b5060808201518160040190805190602001906160279291906162af565b5060a08201518160050190805190602001906160449291906162af565b5060c08201518160060190805190602001906160619291906162af565b5060e082015181600701556101008201518160080155610120820151816009015561014082015181600a015561016082015181600b0160006101000a81548160ff0219169083151502179055509050505b6160c4565b8080600101915050615d88565b5050505050565b60606000806060600080861415616119576040805190810160405280600181526020017f30000000000000000000000000000000000000000000000000000000000000008152509450616219565b8593505b600084141515616143578280600101935050600a8481151561613b57fe5b04935061611d565b826040519080825280601f01601f1916602001820160405280156161765781602001602082028038833980820191505090505b5091506001830390505b60008614151561621557600a8681151561619657fe5b066030017f0100000000000000000000000000000000000000000000000000000000000000028282806001900393508151811015156161d157fe5b9060200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600a8681151561620d57fe5b049550616180565b8194505b50505050919050565b6101806040519081016040528060608152602001606081526020016060815260200160608152602001606081526020016060815260200160608152602001600081526020016000815260200160008152602001600081526020016000151581525090565b608060405190810160405280606081526020016060815260200160608152602001600081525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106162f057805160ff191683800117855561631e565b8280016001018555821561631e579182015b8281111561631d578251825591602001919060010190616302565b5b50905061632b919061640f565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061637057805160ff191683800117855561639e565b8280016001018555821561639e579182015b8281111561639d578251825591602001919060010190616382565b5b5090506163ab919061640f565b5090565b8280548282559060005260206000209081019282156163fe579160200282015b828111156163fd5782518290805190602001906163ed9291906162af565b50916020019190600101906163cf565b5b50905061640b9190616434565b5090565b61643191905b8082111561642d576000816000905550600101616415565b5090565b90565b61645d91905b8082111561645957600081816164509190616460565b5060010161643a565b5090565b90565b50805460018160011615610100020316600290046000825580601f1061648657506164a5565b601f0160209004906000526020600020908101906164a4919061640f565b5b505600a165627a7a72305820ea8e74f6c4dae0d20a8cfdcc1feffca5f6284359ddd82ff04282b8047528c7870029";
// private key of 0xBA30505351c17F4c818d94a990eDeD95e166474b
export const PRIVATE_KEY = "0xae1a52546294bed6e734185775dbc84009de00bdf51b709471e2415c31ceeed7";
export const SET_OWNER = "setOwner";
export const GET_OWNER = "getOwner";
export const UPDATE_AVAILABLE_TYPE = "updateAvailableType";
export const GET_ADDRESS_FROM_TYPE = "getAddressFromType";
export const UPDATE_RATE = "updateRate";
export const GET_RATE = "getRate";
export const AUTHORIZE_USER = "authorizedUser";
export const IS_AUTHORIZED = "isAuthorized";


const RATE = {
  "TRX": 16571,
  "NEO": 6482133
};

// TRON
export const TRON = "TRX";
export const TRX_CONTRACT_HASH = "0x41d69c86eeaa2c1ea0e2db91a64c2ed5814ec66470";
export const TRX_RECEIVER = "TMm48VEk8foxwo5656DsAS58WKtgV7fYtH";

// NEO
export const NEO = "NEO";
export const NEO_CONTRACT_HASH = "0xa68d7d38d9f56bb88195dabee2160321b047d110";
export const NEO_CONTRACT_ADDRESS = "AHJoAbhenvrgSqUpfLWuwy55Lyi596MEt3";
export const NEO_HOST = "http://34.92.41.4:30333";
export const NEO_SCAN = "http://34.92.41.4:4000/api/main_net";
export const NEO_PUBLIC_KEY = "031a6c6fbbdf02ca351745fa86b9ba5a9452d785ac4f7fc2b7548ca2a46c4fcf4a";
export const NEO_PRIVATE_KEY = "KxDgvEKzgSBPPfuVfw67oPQBSjidEiqTHURKSDL1R7yGaGYAeYnr";

export const admins = [
	"0xc1fe56E3F58D3244F606306611a5d10c8333f1f6",
    "0x7cefC13B6E2aedEeDFB7Cb6c32457240746BAEe5",
    "0xfF3dac4f04dDbD24dE5D6039F90596F0a8bb08fd",
    "0x071E8F5ddddd9f2D4B4Bdf8Fc970DFe8d9871c28",
    "0x94FD535AAB6C01302147Be7819D07817647f7B63",
    "0xa8073C95521a6Db54f4b5ca31a04773B093e9274",
    "0xe94517a4f6f45e80CbAaFfBb0b845F4c0FDD7547",
    "0x212a83C0D7Db5C526303f873D9CeaA32382b55D0"
];

export const delay = (ms) => {
  return new Promise(function (resolve, reject) {
    setTimeout(resolve, ms);
  });
};

export const call = async (methodName, params) => {
	const tool = KardiaTool(KARDIA_ENDPOINT);
	const api = Api(tool.provider);
	const contract = tool.contract(tool.provider, EXCHANGE_BYTE_CODE, kardiaAbi);
	const invoker = contract.invoke({
      params: params,
      name: methodName
    });
	const callObject = {
		from: "0xBA30505351c17F4c818d94a990eDeD95e166474b",
		to: KARDIA_CONTRACT_ADDRESS,
		data: invoker.txData(),
		value: 0,
		gasPrice: 2000000,
		gas: 90000,
	};
	return await api.callSmartContract(callObject, 0);
}

export const invoke = async (methodName, params, isSend=true) => {
  try {
    const tool = KardiaTool(KARDIA_ENDPOINT);
    const contract = tool.contract(tool.provider, EXCHANGE_BYTE_CODE, kardiaAbi);
    const invoker = contract.invoke({
      params: params,
      name: methodName
    });
    let txPayload = {
        amount: 0,
        gas: 2000000,
        gasPrice: 90000,
        from: "0xBA30505351c17F4c818d94a990eDeD95e166474b"
      };
    if (isSend) {
      return await invoker.send(PRIVATE_KEY, KARDIA_CONTRACT_ADDRESS, txPayload);
    }

    // use call
    return await invoker.call(KARDIA_CONTRACT_ADDRESS, txPayload)

  } catch(e) {
    return Promise.reject({
      error: e.message
    })
  }
};

export const addAdmins = async() => {
	for (let i = 0; i < admins.length; i++) {
		console.log(`Authorizing user ${admins[i]}`);
		let tx = await invoke(AUTHORIZE_USER, [admins[i]]);
		console.log(tx.transactionHash);
	}
};

export const isAuthorized = async(address) => {
	let count = 0;
  while(true) {
    if (count === 5) {
      return false;
    }
    // get owner
    let result = await call(IS_AUTHORIZED, [address]);
    if (result != "0x0000000000000000000000000000000000000000000000000000000000000001") {
      count++;
      await delay(2000);
    } else {
      // console.log(result);
      return true;
    }
  }
};

export const setup = async () => {

  console.log(utf8ToHex(NEO_CONTRACT_HASH));	

  set owner
  console.log("setting owner");
  let tx = await invoke(SET_OWNER, []);
  console.log(tx.transactionHash);

  await addAdmins();

  // set AvailableTypes for TRX and NEO
  console.log("setting ETH contract hash");
  tx = await invoke(UPDATE_AVAILABLE_TYPE, ["ETH", utf8ToHex("0xF5164638322A18acA63AA101fd39F4D6F192537c")]);
  console.log(tx.transactionHash);

  console.log("setting TRX contract hash");
  tx = await invoke(UPDATE_AVAILABLE_TYPE, [TRON, utf8ToHex(TRX_CONTRACT_HASH)]);
  console.log(tx.transactionHash);

  console.log("setting NEO contract hash");
  tx = await invoke(UPDATE_AVAILABLE_TYPE, [NEO, utf8ToHex(NEO_CONTRACT_HASH)]);
  console.log(tx.transactionHash);

  // // // set rate
  console.log("Updating rate ETH-NEO");
  tx = await invoke(UPDATE_RATE, ["ETH", NEO, 100000000, RATE[NEO]]);
  console.log(tx.transactionHash);

  console.log("Updating rate NEO-ETH");
  tx = await invoke(UPDATE_RATE, [NEO, "ETH", RATE[NEO], 100000000]);
  console.log(tx.transactionHash);

  console.log("Updating rate NEO-TRX");
  tx = await invoke(UPDATE_RATE, [NEO, TRON, RATE[NEO], RATE[TRON]]);
  console.log(tx.transactionHash);

  console.log("Updating rate TRX-NEO");
  tx = await invoke(UPDATE_RATE, [TRON, NEO, RATE[TRON], RATE[NEO]]);
  console.log(tx.transactionHash);

  console.log("Updating rate ETH-TRX");
  tx = await invoke(UPDATE_RATE, ["ETH", TRON, 100000000, RATE[TRON]]);
  console.log(tx.transactionHash);

  console.log("Updating rate TRX-ETH");
  tx = await invoke(UPDATE_RATE, [TRON, "ETH", RATE[TRON], 100000000]);
  console.log(tx.transactionHash);

  return await test();
};

export const test = async () => {
  // get owner
  console.log("getting owner");
  let done = await getOwner();
  if (!done) return false;

  // // get address from TRX
  console.log("get address from ETH");
  done = await getAddressFromType("ETH");
  if (!done) return false;

  // // get address from NEO
  console.log("get address from NEO");
  done = await getAddressFromType("NEO");
  if (!done) return false;

  // get rate from NEO to TRX
  console.log("get rate from NEO to TRX");
  await getRate("NEO", "TRX");
  if (!done) return false;

  console.log("get rate from ETH to NEO");
  await getRate("ETH", "NEO");
  // if (!done) return false;

  console.log("get rate from NEO to ETH");
  await getRate("NEO", "ETH");

  console.log("check is authorized");
  for (let i=0; i<admins.length; i++) {
  	console.log(`${admins[i]}=${await isAuthorized(admins[i])}`);
  }

  // get rate from TRX to NEO
  console.log("get rate from TRX to NEO");
  await getRate("TRX", "NEO");
  return done;
};

export const getAddressFromType = async (_type) => {
  let count = 0;
  while(true) {
    if (count === 5) {
      return false;
    }
    // get owner
    let result = await call(GET_ADDRESS_FROM_TYPE, [_type]);
    if (!result) {
      count++;
      await delay(2000);
    } else {
      console.log(result);
      return true;
    }
  }
};

export const getOwner = async () => {
  let count = 0;
  while(true) {
    if (count === 5) {
      return false;
    }
    // get owner
    let result = await call(GET_OWNER, []);
    if (!result) {
      count++;
      await delay(2000);
    } else {
      console.log(result);
      return true;
    }
  }
};

export const getRate = async (fromType, toType) => {
  let count = 0;
  while(true) {
    if (count === 5) {
      return false;
    }
    // get owner
    let result = await call(GET_RATE, [fromType, toType]);
    if (!result) {
      count++;
      await delay(2000);
    } else {
      console.log(result);
      return (result.fromAmount === RATE[fromType] && result.receivedAmount === RATE[toType])
    }
  }
};
